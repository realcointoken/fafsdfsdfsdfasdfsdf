function coinorama_markets_load(){function ba(){var a=0;for(u in exchanges_uid)E[u]&&(a+=exchanges_uid[u]);return a}function Ua(){var a=document.cookie,c=a.indexOf("markets=");if(-1!=c){var c=a.indexOf("=",c)+1,b=a.indexOf(";",c),a=-1!=b?unescape(a.substring(c,b)):unescape(a.substring(c));a:{var f;try{f=JSON.parse(a)}catch(h){break a}-1!="sc".indexOf(f.mode)&&(n.mode=f.mode);f.exch in exchanges_uid&&(n.exch=f.exch);0>f.exch_multi&&(f.exch_multi=595);n.exch_multi=f.exch_multi;f.view in T&&(n.view=
f.view);f.viewmode in{length:0,interval:1}&&(n.viewmode=f.viewmode);f.theme in{classic:0,thematic:1}&&(n.theme=f.theme);f.yaxis in{left:0,right:1}&&(n.yaxis=f.yaxis);f.hasOwnProperty("rpanel")&&(n.rpanel=f.rpanel);if(f.hasOwnProperty("curr"))for(y in currency_list)a=currency_list[y],f.curr.hasOwnProperty(a)&&(n.curr[a]=f.curr[a]);for(cid in q)f.hasOwnProperty(cid)&&f[cid].name in fa&&(n[cid]=f[cid])}}}function s(){var a=new Date;a.setDate(a.getDate()+366);for(cid in q)n[cid]=q[cid].getConfig();document.cookie=
"markets="+JSON.stringify(n)+"; expires="+a.toUTCString()}function la(a,c){var b=1E3*c[0];"USD"==r&&(a.usd_conv_rate=c[9]);var f=c[1]*a.usd_conv_rate;a.prices.push([b,f]);a.prices_accum.push(f);a.prices_sum+=f;a.prices_accum.length>ca&&(a.prices_sum-=a.prices_accum.shift());a.prices_mavg.push([b,a.prices_sum/a.prices_accum.length]);a.sum_asks.push([b,c[2]]);a.sum_bids.push([b,c[3]*a.usd_conv_rate]);var h=c[3]/(c[2]*c[1]);a.baratios.push([b,h]);a.baratios_accum.push(h);a.baratios_sum+=h;a.baratios_accum.length>
ca&&(a.baratios_sum-=a.baratios_accum.shift());a.baratios_mavg.push([b,a.baratios_sum/a.baratios_accum.length]);a.volume.push([b,c[4]]);a.nb_trades.push([b,c[5]]);0<c[5]?a.avg_trade_size.push([b,c[4]/c[5]]):a.avg_trade_size.push([b,0]);a.lag.push([b,Math.min(sa,c[6])]);a.top_ask.push([b,c[7]*a.usd_conv_rate]);a.top_bid.push([b,c[8]*a.usd_conv_rate]);a.atr.push([b,c[10]*a.usd_conv_rate]);h=c[11];a.rsi.push([b,h]);a.rsi_accum.push(h);a.rsi_sum+=h;a.rsi_accum.length>ca&&(a.rsi_sum-=a.rsi_accum.shift());
a.rsi_mavg.push([b,a.rsi_sum/a.rsi_accum.length]);a.tsi.push([b,c[12]]);if("s"==n.mode||1==H)a.prices_open.push([b,c[13]]),a.prices_close.push([b,c[14]]),a.prices_min.push([b,c[15]]),a.prices_max.push([b,c[16]]),a.adx_dmp.push([b,c[17]]),a.adx_dmn.push([b,c[18]]),a.adx.push([b,c[19]]),a.variance7.push([b,c[20]]),a.variance21.push([b,c[21]]),0<a.macd.length?(a.prices_ema12_seed=f*ta+a.prices_ema12_seed*(1-ta),a.prices_ema12.push([b,a.prices_ema12_seed]),a.prices_ema26_seed=f*ua+a.prices_ema26_seed*
(1-ua),a.prices_ema26.push([b,a.prices_ema26_seed]),f=a.prices_ema12_seed-a.prices_ema26_seed,a.macd.push([b,f]),a.macd_ema9_seed=f*va+a.macd_ema9_seed*(1-va),a.macd_ema9.push([b,a.macd_ema9_seed]),a.macd_delta.push([b,f-a.macd_ema9_seed]),a.tsi_ema7_seed=c[12]*wa+a.tsi_ema7_seed*(1-wa),a.tsi_ema7.push([b,a.tsi_ema7_seed])):(a.prices_ema12_seed=c[22],a.prices_ema12.push([b,c[22]]),a.prices_ema26_seed=c[23],a.prices_ema26.push([b,c[23]]),f=c[22]-c[23],a.macd.push([b,f]),a.macd_ema9_seed=c[24],a.macd_ema9.push([b,
c[24]]),a.macd_delta.push([b,f-c[24]]),a.tsi_ema7_seed=c[25],a.tsi_ema7.push([b,c[25]]))}function xa(a,c){a.book_bids=[];a.book_asks=[];for(var b=c.bids[0],f=c.bids[1],h=0;h<f.length;++h)a.book_bids.push([(b-h)*a.usd_conv_rate,f[h]]);b=c.asks[0];f=c.asks[1];for(h=0;h<f.length;++h)a.book_asks.push([(b+h)*a.usd_conv_rate,f[h]])}function A(a,c){var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a;a["super"]=c}function ga(){var a=U;if(0!=a.length&&"s"!=n.mode){for(var c=
[],b=T[n.view].precision,f=0,h=777777777777777,g=f=0;g<a.length;++g)e=a[g],c.push([]),e.prices[0][0]<h&&(h=e.prices[0][0]),e.prices[e.prices.length-1][0]>f&&(f=e.prices[e.prices.length-1][0]);var k,d=[];k=0;for(l=h;l<f+b;l+=b,++k)d[k]=0;f=k;for(g=0;g<a.length;++g){var p=0,e=a[g];k=0;for(var l=h;k<f;++k,l+=b)c[g][k]=-1,p<e.prices.length&&e.prices[p][0]<=l&&(c[g][k]=p,++p)}for(g=0;g<a.length;++g){k=[];for(var D=[],J=[],r,N,Q,e=a[g],p=r=0,l=h;p<f;l+=b,++p)Q=N=0,-1!=c[g][p]&&(r=e.prices[c[g][p]][1],N=
e.volume[c[g][p]][1],Q=e.nb_trades[c[g][p]][1]),k[p]=[l,r],D[p]=[l,N],J[p]=[l,Q],d[p]+=N;e.prices_synced=k;e.volume_synced=D;e.nb_trades_synced=J}if(2<=f){l=!0;for(g=0;g<a.length;++g)if(-1!=c[g][f-2]){l=!1;break}if(l)for(g=0;g<a.length;++g){var e=a[g];e.volume_synced[f-2][1]=e.volume_synced[f-1][1];e.volume_synced[f-1][1]=0;d[f-2]=d[f-1];d[f-1]=0;e.nb_trades_synced[f-2][1]=e.nb_trades_synced[f-1][1];e.nb_trades_synced[f-1][1]=0}}for(g=0;g<a.length;++g)for(e=a[g],e.volumerel=[],p=0;p<f;++p)0<d[p]&&
e.volumerel.push([e.volume_synced[p][0],e.volume_synced[p][1]/d[p]*100]);var g=f,s=0,d=[],f=[],l=[],e=[],p=[];k=[];D=[];J=0;r=[];N=[];Q=[];for(var t=[],w=[],x=[],V=[],y=[],A=[],m=0;m<g;h+=b,++m)d[m]=[h,0],f[m]=[h,0],l[m]=[h,0],e[m]=[h,0],p[m]=[h,0],k[m]=[h,0],r[m]=[h,0],N[m]=[h,0],Q[m]=[h,0],t[m]=[h,0],w[m]=[h,0],x[m]=[h,0],V[m]=[h,0],y[m]=[h,0];for(h=0;h<a.length;++h)A.push(-1);for(m=0;m<g;++m){for(var z=b=s=0,h=0;h<a.length;++h)if(u=a[h],E[u.name]){var b=b+u.volume_synced[m][1],v=c[h][m];-1==v&&
(v=A[h]);-1!=v&&(++s,z+=a[h].volume_1d,d[m][1]+=u.prices[v][1]*u.volume_1d,f[m][1]+=u.prices_mavg[v][1]*u.volume_1d,l[m][1]+=u.sum_asks[v][1],e[m][1]+=u.sum_bids[v][1],N[m][1]+=u.nb_trades[v][1],Q[m][1]+=u.nb_trades[v][1],t[m][1]+=u.lag[v][1],w[m][1]+=u.atr[v][1],x[m][1]+=u.rsi[v][1],V[m][1]+=u.rsi_mavg[v][1],y[m][1]+=u.tsi[v][1],A[h]=v)}r[m][1]=b;0==z&&(z=1E-7);0<s?(d[m][1]/=z,f[m][1]/=z,l[m][1]=l[m][1],e[m][1]=e[m][1],h=e[m][1]/(l[m][1]*d[m][1]),p[m][1]=h,D.push(h),J+=h,D.length>ca&&(J-=D.shift()),
k[m][1]=J/D.length,Q[m][1]=0<N[m][1]?b/N[m][1]:0,t[m][1]/=s,w[m][1]/=s,x[m][1]/=s,V[m][1]/=s,y[m][1]/=s):0<m&&(d[m][1]=d[m-1][1],f[m][1]=f[m-1][1],l[m][1]=l[m-1][1],e[m][1]=e[m-1][1],p[m][1]=p[m-1][1],k[m][1]=k[m-1][1],Q[m][1]=0,t[m][1]=t[m-1][1],w[m][1]=w[m-1][1],x[m][1]=x[m-1][1],V[m][1]=V[m-1][1],y[m][1]=y[m-1][1])}B=edata={name:"merged",prices:d,prices_mavg:f,sum_asks:l,sum_bids:e,baratios:p,baratios_mavg:k,volume:r,nb_trades:N,avg_trade_size:Q,lag:t,atr:w,rsi:x,rsi_mavg:V,tsi:y}}a=U;for(h=b=
c=0;h<a.length;++h)u=a[h],b=Math.max(b,u.prices[u.prices.length-1][0]-u.prices[0][0]),c=Math.max(c,u.prices.length);for(cid in q)q[cid].prepare(a,b,c);for(cid in q)q[cid].plot()}function Va(a){ha=0;x=setTimeout(O,1E4);if(X){if(1!=a.f)return;a:{var c=a.data,b=[];if(null==c||"s"!=n.mode&&0==H)U=[];else{for(var f=0;f<c.length;++f){var h=c[f].name,g=c[f].stats,k=c[f].book;null!=k?ma[h]=k:k=ma[h];if(null==k){Y=!0;U=[];break a}for(var h={name:h,id:f,usd_conv_rate:1,prices:[],prices_mavg:[],prices_accum:[],
prices_sum:0,prices_ema12:[],prices_ema12_seed:0,prices_ema26:[],prices_ema26_seed:0,macd:[],macd_ema9:[],macd_ema9_seed:0,macd_delta:[],atr:[],rsi:[],rsi_mavg:[],rsi_accum:[],rsi_sum:0,tsi:[],tsi_ema7:[],tsi_ema7_seed:0,prices_open:[],prices_close:[],prices_min:[],prices_max:[],adx_dmp:[],adx_dmn:[],adx:[],variance7:[],variance21:[],sum_asks:[],sum_bids:[],baratios:[],baratios_mavg:[],baratios_accum:[],baratios_sum:0,volume:[],nb_trades:[],avg_trade_size:[],lag:[],top_ask:[],top_bid:[],book_asks:[],
book_bids:[]},d=0;d<g.length;d++)la(h,g[d]);xa(h,k);b.push(h)}U=b}}X=!1}else if(0==a.f)for(c=a.data,b=0;b<c.length;++b){f=U[b];g=c[b].stats;k=c[b].book;h=!0;if(0<f.prices.length){d=f;if(0!=d.prices.length){d.prices.pop();d.prices_mavg.pop();d.prices_sum-=d.prices_accum.pop();if("s"==n.mode||1==H)d.prices_open.pop(),d.prices_close.pop(),d.prices_min.pop(),d.prices_max.pop(),d.adx_dmp.pop(),d.adx_dmn.pop(),d.adx.pop(),d.variance7.pop(),d.variance21.pop(),d.prices_ema12.pop(),d.prices_ema26.pop(),d.macd.pop(),
d.macd_ema9.pop(),d.macd_delta.pop(),d.tsi_ema7.pop(),0<d.prices.length&&(d.prices_ema12_seed=d.prices_ema12[d.prices_ema12.length-1][1],d.prices_ema26_seed=d.prices_ema26[d.prices_ema26.length-1][1],d.macd_ema9_seed=d.macd_ema9[d.macd_ema9.length-1][1],d.tsi_ema7_seed=d.tsi_ema7[d.tsi_ema7.length-1][1]);d.sum_asks.pop();d.sum_bids.pop();d.baratios.pop();d.baratios_mavg.pop();d.baratios_sum-=d.baratios_accum.pop();d.volume.pop();d.nb_trades.pop();d.avg_trade_size.pop();d.lag.pop();d.atr.pop();d.rsi.pop();
d.rsi_mavg.pop();d.rsi_sum-=d.rsi_accum.pop();d.tsi.pop();d.top_ask.pop();d.top_bid.pop()}if(0<f.prices.length)if(d=1E3*g[0][0],f.prices[f.prices.length-1][0]!=d){if(d-f.prices[0][0]>T[n.view].length){var d=f,p=!1;if(0!=d.prices.length){d.prices.length<=ca&&(p=!0);d.prices.shift();d.prices_mavg.shift();p&&(d.prices_sum-=d.prices_accum.shift());if("s"==n.mode||1==H)d.prices_open.shift(),d.prices_close.shift(),d.prices_min.shift(),d.prices_max.shift(),d.adx_dmp.shift(),d.adx_dmn.shift(),d.adx.shift(),
d.variance7.shift(),d.variance21.shift(),d.prices_ema12.shift(),d.prices_ema26.shift(),d.macd.shift(),d.macd_ema9.shift(),d.macd_delta.shift(),d.tsi_ema7.shift();d.sum_asks.shift();d.sum_bids.shift();d.baratios.shift();d.baratios_mavg.shift();p&&(d.baratios_sum-=d.baratios_accum.shift());d.volume.shift();d.nb_trades.shift();d.avg_trade_size.shift();d.lag.shift();d.atr.pop();d.rsi.shift();d.rsi_mavg.shift();p&&(d.rsi_sum-=d.rsi_accum.shift());d.tsi.shift();d.top_ask.shift();d.top_bid.shift()}}}else h=
!1}h&&la(f,g[0]);1<g.length&&(h=exchanges_info_by_name[f.name],la(f,g[1]),g[1][6]>=sa?$("span#live_ename_"+h.name).html("[!] "+h.desc):$("span#live_ename_"+h.name).html(h.desc));null!=k&&xa(f,k)}for(b=0;b<U.length;++b)U[b].volume_1d=a.ticks[U[b].name].volume;coinorama_ticks_updateMarkets(a.ticks,n.mode,n.exch,E);ga()}function Wa(a,c,b){ha+=1;3<ha&&($("span#winmsg_title").text("Error"),$("div#winmsg_ctnt").html("Sorry, latest markets data could not be fetched.<br/>The service is being upgraded/rebooted, or it crashed.<br/>Please reload the page in a couple of minutes.<br/><br/>"),
windowShow("message"));x=setTimeout(O,1E4)}function O(){var a=[],c="/coinorama/data.cf",b=(new Date).getTime();"s"!=n.mode?1==H?a.push("e="+ba()):(a.push("m="+n.mode),a.push("E="+ba())):a.push("e="+exchanges_uid[n.exch]);a.push("v="+n.view);Y?(a.push("b=1"),Y=!1,ya=b):3E4<b-ya&&(Y=!0);X&&a.push("f=1");a.push("k=0");0<a.length&&(c=c+"?"+a.join("&"));$.ajax({url:c,type:"GET",dataType:"json",success:Va,error:Wa})}function za(a){if(n.curr[a]){$("a#cur_"+a+"_display").html("[-]");for(var c in exchanges_by_currency[a])$("td#exch_"+
exchanges_by_currency[a][c].name).show()}else for(c in $("a#cur_"+a+"_display").html("[+]"),exchanges_by_currency[a]){var b=exchanges_by_currency[a][c];E[b.name]||n.exch==b.name?$("td#exch_"+b.name).show():$("td#exch_"+b.name).hide()}}function Aa(a){n.curr[a]=!n.curr[a];za(a);s()}function na(a){-1!=x&&clearTimeout(x);n.mode=a;if("s"==n.mode){$("a#mode_multi").css("color",M);$("a#mode_single").css("color",R);for(u in exchanges_uid)a=$("a#exch_"+u),a.css("color",M);a=$("a#exch_"+n.exch);a.css("color",
R);r=getExchangeCurrency(n.exch)}else for(u in r=detectShownCurrency(E),"c"==n.mode&&($("a#mode_single").css("color",M),$("a#mode_multi").css("color",R)),exchanges_uid)a=$("a#exch_"+u),E[u]?a.css("color",R):a.css("color",M);$("option#chart_type_price").text("Price ("+r+")");$("option#chart_type_volcurr").text("Volume ("+r+")");for(cid in q)q[cid].modeChanged();Y=X=!0;O();s()}function Ba(a){-1!=x&&clearTimeout(x);if("s"==n.mode){for(u in exchanges_uid)$("a#exch_"+u).css("color",M);n.exch=a;r=getExchangeCurrency(n.exch);
var c=$("a#exch_"+a);c.css("color",R)}else{if(4<H&&!E[a]){$("span#winmsg_title").text("Information");$("div#winmsg_ctnt").html("Currently, only five exchanges can be used at the same time.<br/>Please, disable an exchange to activate another.<br/><br/>");windowShow("message");x=setTimeout(O,2E3);return}E[a]?(E[a]=!1,--H):(E[a]=!0,++H);var c=Long.fromNumber(n.exch_multi),b=Long.fromNumber(exchanges_uid[a]);n.exch_multi=c.xor(b).toNumber();c=$("a#exch_"+a);E[a]?c.css("color",R):c.css("color",M);r=detectShownCurrency(E)}previous_price=
0;$("option#chart_type_price").text("Price ("+r+")");$("option#chart_type_volcurr").text("Volume ("+r+")");for(var f in q)q[f].exchangeChanged();Y=X=!0;O();s()}function Ca(){"classic"==n.theme?($("img#btn_theme_classic").attr("src",z),$("img#btn_theme_perchart").attr("src",v),I=Da,oa=Ea,ia=Fa,ja=Ga,F=Ha,ka=Ia,pa=G=qa=W=da,P=Ja):($("img#btn_theme_classic").attr("src",v),$("img#btn_theme_perchart").attr("src",z),I=Xa,oa=Ya,ia=Za,ja=$a,F=ab,ka=bb,W=cb,qa=db,G=eb,pa=fb,P=gb)}function Ka(a){-1!=x&&clearTimeout(x);
n.theme=a;Ca();for(var c in q)q[c].update(!0);s();x=setTimeout(O,2E3)}function La(){"left"==n.yaxis?(K="left",$("img#btn_yaxis_left").attr("src",z),$("img#btn_yaxis_right").attr("src",v)):(K="right",$("img#btn_yaxis_right").attr("src",z),$("img#btn_yaxis_left").attr("src",v))}function Ma(a){-1!=x&&clearTimeout(x);n.yaxis=a;La();for(var c in q)q[c].update(!0);s();x=setTimeout(O,2E3)}function Na(){n.rpanel?($("img#btn_right_pane").attr("alt","disable"),$("img#btn_right_pane").attr("src",w),q.mr1.expanded||
q.mr2.expanded||q.mr3.expanded?$("div#markets_lpanel").css("width",Oa):$("div#markets_lpanel").css("width",Pa),$("div#markets_rpanel").show()):($("img#btn_right_pane").attr("alt","enable"),$("img#btn_right_pane").attr("src",L),$("div#markets_rpanel").hide(),$("div#markets_lpanel").css("width",hb))}function Z(a){var c=Math.max(400,$(window).height()-352);q.ml1.expanded?($("div#ml2_chart").css("height",(.2*c).toFixed(0)+"px"),$("div#ml3_chart").css("height",(.2*c).toFixed(0)+"px"),q.ml2.shown?q.ml3.shown?
$("div#ml1_chart").css("height",(.6*c).toFixed(0)+"px"):$("div#ml1_chart").css("height",(.8*c).toFixed(0)+"px"):q.ml3.shown?$("div#ml1_chart").css("height",(.8*c).toFixed(0)+"px"):$("div#ml1_chart").css("height",c.toFixed(0)+"px")):q.ml2.expanded?($("div#ml1_chart").css("height",(.2*c).toFixed(0)+"px"),$("div#ml3_chart").css("height",(.2*c).toFixed(0)+"px"),q.ml1.shown?q.ml3.shown?$("div#ml2_chart").css("height",(.6*c).toFixed(0)+"px"):$("div#ml2_chart").css("height",(.8*c).toFixed(0)+"px"):q.ml3.shown?
$("div#ml2_chart").css("height",(.8*c).toFixed(0)+"px"):$("div#ml2_chart").css("height",c.toFixed(0)+"px")):q.ml3.expanded?($("div#ml1_chart").css("height",(1/3*c).toFixed(0)+"px"),$("div#ml2_chart").css("height",(1/3*c).toFixed(0)+"px"),q.ml1.shown?q.ml2.shown?$("div#ml3_chart").css("height",(1/3*c).toFixed(0)+"px"):$("div#ml3_chart").css("height",(2/3*c).toFixed(0)+"px"):q.ml2.shown?$("div#ml3_chart").css("height",(2/3*c).toFixed(0)+"px"):$("div#ml3_chart").css("height",c.toFixed(0)+"px")):($("div#ml1_chart").css("height",
(.4*c).toFixed(0)+"px"),$("div#ml2_chart").css("height",(.4*c).toFixed(0)+"px"),$("div#ml3_chart").css("height",(.2*c).toFixed(0)+"px"));var b=9/44;q.mr1.expanded?$("div#mr1_chart").css("height",(.4*c).toFixed(0)+"px"):$("div#mr1_chart").css("height",(c*b).toFixed(0)+"px");q.mr2.expanded?$("div#mr2_chart").css("height",(.75*c).toFixed(0)+"px"):$("div#mr2_chart").css("height",(c*b*2).toFixed(0)+"px");q.mr3.expanded?$("div#mr3_chart").css("height",(.4*c).toFixed(0)+"px"):$("div#mr3_chart").css("height",
(c*b).toFixed(0)+"px");1<a?ga():a&&(clearTimeout(Qa),Qa=setTimeout(ga,200))}function Ra(a){q[a].expanded=!0;q[a].updateControls();"r"==a[1]&&($("div#"+a).css("margin-right","0"),$("div#"+a).css("margin-left","1em"),$("div#markets_lpanel").css("width",Oa),$("div#markets_rpanel").css("width",ib));switch(a){case "mr1":$("div#mr2").css("width","45%");$("div#mr3").css("width","45%");$("div#mr2").css("margin-left","1em");break;case "mr2":$("div#mr2").insertBefore($("div#mr1"));$("div#mr1").css("width",
"45%");$("div#mr3").css("width","45%");$("div#mr1").css("margin-left","1em");$("div#mr1").css("margin-right","0");$("div#mr3").css("margin-left","1em");break;case "mr3":$("div#mr3").insertBefore($("div#mr1")),$("div#mr2").insertBefore($("div#mr1")),$("div#mr2").css("width","45%"),$("div#mr1").css("width","45%"),$("div#mr2").css("margin-left","1em")}}function Sa(a){q[a].expanded=!1;q[a].updateControls();"r"==a[1]&&($("div#"+a).css("margin-right","1em"),$("div#"+a).css("margin-left","0"),$("div#markets_rpanel").css("width",
jb),$("div#markets_lpanel").css("width",Pa));switch(a){case "mr1":$("div#mr2").css("width","93%");$("div#mr3").css("width","93%");$("div#mr2").css("margin-left","0");break;case "mr2":$("div#mr1").css("width","93%");$("div#mr3").css("width","93%");$("div#mr1").css("margin-left","0");$("div#mr3").css("margin-left","0");$("div#mr2").insertAfter($("div#mr1"));break;case "mr3":$("div#mr2").css("width","93%"),$("div#mr1").css("width","93%"),$("div#mr2").css("margin-left","0"),$("div#mr2").insertAfter($("div#mr1")),
$("div#mr3").insertAfter($("div#mr2"))}}function aa(a){var c;c=""+('<div style="float:left;"><a id="toggle_'+a+'" href="#"><img class="btn" id="btn_'+a+'_view" src="'+w+'" alt="disable"/></a>&nbsp;');c+='<select class="cbox" id="cb_'+a+'">';for(var b in Ta){var f=Ta[b];c+='<option value="null" disabled> -- '+f.name+" -- </option>";for(var h in f.charts){var g=f.charts[h];fa[g.getName()]=g;c+='<option value="'+g.getName()+'"  id="chart_type_'+g.getName()+'">'+g.getTitle()+"</option>"}}c=c+"</select>&nbsp;"+
('<span id="'+a+'_ctrl"></span>&nbsp;');c+="</span>| &nbsp;</div>";c+='<div id="'+a+'_legend" style="display:inline-block; overflow:hidden; font-size:x-small; margin:0px 0;"></div>';c+='<br style="clear:both" />';c+='<div id="'+a+'_chart" class="markets_chart"></div>';$("div#"+a).prepend(c);$("select#cb_"+a).on("change",function(){var f=this.value;-1!=x&&clearTimeout(x);var c=q[a].expanded,p=q[a].shown;q[a].destroy();q[a]=new fa[f](a);q[a].setConfig({show:p,expand:c});ga();x=setTimeout(O,2E3);s()})}
function kb(){var a,c="n",b="";a='<table class="ctrl_table" style="color:#555;">'+('<tr style="color:#bbb; background:#333; font-size:xx-small;"><td colspan="'+t.length+'">');a+='<a id="view_mode_length" href="#">TIMESPAN</a> &nbsp;&nbsp; ';a+='<a id="view_mode_interval" href="#">INTERVAL</a>';a+="</td></tr>";a+="<tr>";for(var f in t)b=c==t[f].name[t[f].name.length-1]?"":"| &nbsp;",a+="<td>"+b+'<a id="view_'+t[f].code+'" href="#">'+t[f].name+"</a></td>",c=t[f].name[t[f].name.length-1];a+="</tr>";
a+="</table>";$("div#markets_periods").append(a)}function ra(a){$("a#view_mode_"+n.viewmode).css("color",M);$("a#view_mode_"+a).css("color",R);n.viewmode=a;for(var c in t)"interval"==a?$("a#view_"+t[c].code).html(t[c].precname):$("a#view_"+t[c].code).html(t[c].name);s()}function lb(){var a="",c;for(c in currency_list){var b=currency_list[c],f="0.6em";0==c&&(f="0.4em");a+='<div class="ctrl_item">';a+='<table class="ctrl_table" style="margin-left:'+f+'; margin-right:0;">';a+='<tr style="color:#bbb;">';
a+='<td colspan="'+exchanges_by_currency[b].length+'" style="background:#333; font-size:xx-small;">';1<exchanges_by_currency[b].length&&(a+='<a id="cur_'+b+'_display" href="#" style="text-decoration:none">[-]</a>&nbsp; ');var a=a+('<a id="cur_'+b+'" href="#">'+b+" ("+currency_symbol[b]+")</a></td>"),a=a+"</tr>",a=a+"<tr>",h;for(h in exchanges_by_currency[b])f=exchanges_by_currency[b][h],a+='<td id="exch_'+f.name+'"><a id="exch_'+f.name+'" href="#">'+f.desc+"</a></td>";a+="</tr></table></div>"}a+=
'<br style="clear:both" />';$("div#markets_bar").append(a)}var t=[],y;for(y in exchanges_views){var ea=exchanges_views[y];t.push({code:ea.code,name:ea.name,precname:ea.precname,length:ea.length,precision:ea.precision,shortformat:"%H:%M",format:"%H:%M"});31536E6<=t[y].length?(t[y].shortformat="%m/%Y",t[y].format="%b. %Y"):79488E5<=t[y].length?(t[y].shortformat="%d/%m",t[y].format="%d. %b"):6048E5<=t[y].length?(t[y].shortformat="%d/%m",t[y].format="%a. %d"):2592E5<=t[y].length&&(t[y].shortformat="%d/%m",
t[y].format="%a. %Hh")}var T={};for(y in t)T[t[y].code]=t[y];var n={mode:"c",exch:Object.keys(exchanges_uid)[0],exch_multi:2087,view:"s",viewmode:"length",rpanel:!0,theme:"classic",yaxis:"right",curr:{},ml1:{name:"price",expand:!0},ml2:{name:"baratio",merged:!0},ml3:{name:"volume"},mr1:{name:"pricerel"},mr2:{name:"book"},mr3:{name:"lag"}},wa=.25,va=.2,ta=2/13,ua=2/27,ca=7,sa=28,E={},H=0,r="USD",B={},fa={},q={ml1:null,ml2:null,ml3:null,mr1:null,mr2:null,mr3:null},X=!0,Y=!0,ya=0,ma={},R="#fff",M="#777",
w="/coinorama/static/btn-enabled.png",L="/coinorama/static/btn-disabled.png",z="/coinorama/static/btn-toggle-enabled.png",v="/coinorama/static/btn-toggle-disabled.png",Pa="73%",hb="100%",Oa="50%",jb="27%",ib="50%",K="right",Da="#e5db49",Ea="#77a3ef",Fa="#e5db49",Ga="#77a3ef",Ha="#e5db49",Ia="#e5db49",Xa="#bdcd00",Ya="#ddffcc",Za="#5a50cd",$a="#bbccff",ab="#46ad60",bb="#a2c4c7",I=Da,oa=Ea,ia=Fa,ja=Ga,F=Ha,ka=Ia,da=["#e5db49","#a34696","#5377bf","#e5973a","#ba4c40"],Ja=[["#e5db49","#a5bb29"],["#a34696",
"#632665"],["#5377bf","#405988"],["#e5973a","#a5673a"],["#ba4c40","#7a2c20"]],cb=["#bdcd00","#b28a28","#f28a28","#d83e02","#c3503d"],db=["#a191c6","#5a50cd","#8450cd","#a3468f","#c3266f"],eb=["#36ad70","#268fb8","#3759b9","#442f6f","#622f8f"],fb=["#bfa4a7","#a2a4a7","#57585f","#a2c4b7","#82b4c7"],gb=[["#00ff00","#ff0000"],["#00ff99","#ff00cc"],["#00cc44","#cc0044"],["#acf000","#ffcc00"],["#0fff50","#ff8f00"]],W=da,qa=da,G=da,pa=da,P=Ja,x=-1,Qa=-1,ha=3,U=[],S={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2<br/> %x",
xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},series:{stack:!1},lines:{show:!0},grid:{hoverable:!0,borderWidth:"0"},points:{show:!1},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,color:"#151515",position:K,tickFormatter:null}},C=function(){return function(a,c,b){this.cid=a;this.cdiv="div#"+a+"_chart";this.tspan="span#"+
a+"_ctrl";this.ldiv="div#"+a+"_legend";this.supported_modes=c;this.shown=!0;this.expanded=!1;if(this.has_merging=b)this.merging=!1,this.toggleMerging=function(){this.merged=!this.merged;this.updateControls();this.update(!0);s()};this.setConfig=function(a){a.hasOwnProperty("show")&&(this.shown=a.show);a.hasOwnProperty("expand")&&(this.expanded=a.expand);this.has_merging&&a.hasOwnProperty("merged")&&(this.merged=a.merged);this.updateControls()};this.getConfig=function(){var a={};a.name=this.constructor.getName();
a.show=this.shown;a.expand=this.expanded;this.has_merging&&(a.merged=this.merged);return a};this.getTimeFormat=function(){return"l"==this.cid[1]||this.expanded?T[n.view].format:T[n.view].shortformat};this.getMode=function(){return"s"==n.mode||-1!=this.supported_modes.indexOf("s")&&1==H?"s":n.mode};this.computeLogTicks=function(a,c){var b=777777777777777,k=0,d=[];if(0==a.length)return d;if(c)for(l in a[0].data){var p=0;for(e in a)p+=a[e].data[l][1];a[0].data[l][1]<b&&(b=a[0].data[l][1]);p>k&&(k=p)}else for(var e in a){var p=
a[e].data,l;for(l in p)for(var D=1;D<p[l].length;++D)p[l][D]<b&&(b=p[l][D]),p[l][D]>k&&(k=p[l][D])}b/=10;k*=10;l=1;1>b&&(b=0,d.push(0),l=10);for(e=1;20>e;++e,l*=10)if(!(l<b)){if(l>k)break;d.push(l)}2==d.length?(b=d[1]/4,d.splice(1,0,b),d.splice(2,0,2*b),d.splice(3,0,3*b)):3==d.length&&(d.splice(1,0,d[1]/2),d.splice(3,0,d[3]/2));return d};this.exchanges=[];this.prepare=function(a,c,b){this.exchanges=a;this.nbmsecs=c;this.nbpoints=b;$(this.ldiv).empty();0<a.length&&this.update(!1)};this.update=function(a){this.chart_options.hasOwnProperty("yaxis")&&
(this.chart_options.yaxis.position=K);a&&this.plot()};this.plot=function(){if(this.shown)if(0==this.exchanges.length)$(this.cdiv).empty();else{this.chart_options.legend.container=$(this.ldiv);var a=this.getMode();"s"==a?this.plot_single():"c"==a&&this.plot_multiple()}};this.show=function(){this.shown=!0;this.updateControls();Z(2)};this.hide=function(){this.shown=!1;this.updateControls();Z(2)};this.toggleVisibility=function(){this.shown=!this.shown;this.updateControls();Z(2)};this.resize=function(){this.expanded=
!this.expanded;var a=this.cid,c;c="l"==a[1]?{ml1:1,ml2:2,ml3:3}:{mr1:1,mr2:2,mr3:3};if(q[a].expanded){for(var b in c)q[b].expanded&&Sa(b);Ra(a)}else Sa(a);Z(2);s()};this.addControls=function(){$(this.tspan).empty();var a;a=""+('<a id="'+this.cid+'_resize" href="#"><img class="btn" id="btn_'+this.cid+'_resize" src="/coinorama/static/btn-expand.png" alt="enlarge"/></a>');$(this.tspan).append(a);var c=this;$("a#"+this.cid+"_resize").on("click",function(a){a.preventDefault();c.resize()});this.has_merging&&
(a=""+('<span id="'+this.cid+'_merge"> | &nbsp;merge <a id="'+this.cid+'_merge" href="#">'),a+='<img class="btn" id="btn_'+this.cid+'_merge" src="'+w+'" alt="off"/>',a+="</a></span> ",$(this.tspan).append(a),c=this,$("a#"+this.cid+"_merge").on("click",function(a){a.preventDefault();c.toggleMerging()}));this.modeChanged()};this.updateControls=function(){this.shown?($(this.ldiv).show(),$(this.cdiv).show(),$("img#btn_"+this.cid+"_view").attr("alt","disable"),$("img#btn_"+this.cid+"_view").attr("src",
w)):($(this.ldiv).hide(),$(this.cdiv).hide(),$("img#btn_"+this.cid+"_view").attr("alt","enable"),$("img#btn_"+this.cid+"_view").attr("src",L));this.expanded?($("img#btn_"+this.cid+"_resize").attr("src","/coinorama/static/btn-reduce.png"),$("img#btn_"+this.cid+"_resize").attr("alt","reduce"),$(this.ldiv).css("font-size","small"),$(this.cdiv).css("font-size","small")):($("img#btn_"+this.cid+"_resize").attr("src","/coinorama/static/btn-expand.png"),$("img#btn_"+this.cid+"_resize").attr("alt","expand"),
"r"==this.cid[1]?($(this.ldiv).css("font-size","xx-small"),$(this.cdiv).css("font-size","xx-small")):($(this.ldiv).css("font-size","small"),$(this.cdiv).css("font-size","small")));this.has_merging&&("s"!=this.getMode()?($("span#"+this.cid+"_merge").show(),this.merged?($("img#btn_"+this.cid+"_merge").attr("src",w),$("img#btn_"+this.cid+"_merge").attr("alt","off")):($("img#btn_"+this.cid+"_merge").attr("src",L),$("img#btn_"+this.cid+"_merge").attr("alt","on"))):$("span#"+this.cid+"_merge").hide())};
this.removeControls=function(){$(this.tspan).empty();$("a#"+this.cid+"_resize").off();this.has_merging&&$("a#"+this.cid+"_merge").off()};this.modeChanged=function(){$(this.ldiv).empty();$(this.cdiv).empty();-1==this.supported_modes.indexOf(this.getMode())&&$(this.cdiv).html('<span style="font-size:x-small"><br/>/!\\ this chart is not available in this mode /!\\</span>');this.updateControls()};this.viewlengthChanged=function(){this.updateControls()};this.exchangeChanged=function(){-1==this.supported_modes.indexOf(this.getMode())&&
($(this.ldiv).empty(),$(this.cdiv).empty(),$(this.cdiv).html('<span style="font-size:x-small"><br/>/!\\ this chart is not available in this mode /!\\</span>'));this.updateControls()};this.destroy=function(){$(this.cdiv).text("");this.removeControls()}}}(),mb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.chart_options={};this.conf_highlow=[{color:"#f61000",representation:"asymmetric",opacity:.4},{color:"#55ef0f",representation:"asymmetric",opacity:.4}];this.dataset=
[];this.candles=!0;this.setStyle=function(a){this.candles="candles"==a?!0:!1;this.updateControls();this.update(!0);s()};this.show_emas=!0;this.toggleEMAs=function(){this.show_emas=!this.show_emas;this.updateControls();this.update(!0);s()};this.log=!1;this.toggleLog=function(){this.log=!this.log;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("candles")&&(this.candles=a.candles);a.hasOwnProperty("emas")&&(this.show_emas=a.emas);a.hasOwnProperty("log")&&
(this.log=a.log);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.candles=this.candles;a.emas=this.show_emas;a.log=this.log;return a};var h=this.update;this.update=function(a){this.dataset=[];this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();this.log?(this.chart_options.yaxis.transform=function(a){return 1>a?0:Math.log(a)/Math.LN10},this.chart_options.yaxis.inverseTransform=function(a){return 0==a?0:Math.exp(a*Math.LN10)}):
(this.chart_options.yaxis.transform=null,this.chart_options.yaxis.inverseTransform=null,this.chart_options.yaxis.ticks=null,this.chart_options.yaxis.min=null);if("s"==this.getMode()){var e=this.exchanges[0];if(this.candles){e.prices_candle_min=e.prices_min[0][1];e.prices_candle_max=e.prices_max[0][1];for(var l=0;l<e.prices.length;++l)this.dataset[l]=[e.prices[l][0],e.prices_open[l][1],e.prices_close[l][1],e.prices_min[l][1],e.prices_max[l][1]],e.prices_candle_min=Math.min(e.prices_candle_min,e.prices_min[l][1]),
e.prices_candle_max=Math.max(e.prices_candle_max,e.prices_max[l][1]);this.dataset[this.dataset.length-1][0]=T[n.view].precision*(.5+Math.floor(this.dataset[this.dataset.length-1][0]/T[n.view].precision))}else for(l=0;l<e.prices.length;++l)this.dataset[l]=[e.prices[l][0],e.prices[l][1],e.prices_min[l][1],e.prices[l][1],e.prices[l][1],e.prices_max[l][1]]}else if("c"==this.getMode())for(l=0;l<this.exchanges.length;++l)e=this.exchanges[l],this.dataset.push({data:e.prices,label:e.name,color:W[e.id],tooltipFormat:e.name+
"<br />%y.2 "+r+"<br/> %x",lines:{lineWidth:1}});h.call(this,a)};this.plot_single=function(){var a=this.exchanges[0],e=[];this.chart_options.legend.noColumns=3;this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2 "+r+"<br/> %x";this.candles?(this.chart_options.series.candlestick={active:!0},this.log||(this.chart_options.yaxis.min=a.prices_candle_min-.1*(a.prices_candle_max-a.prices_candle_min),this.chart_options.yaxis.max=a.prices_candle_max+.1*(a.prices_candle_max-
a.prices_candle_min)),e.push({data:this.dataset,label:"price ("+r+")",color:"#000",candlestick:{show:!0,lineWidth:this.nbmsecs/this.nbpoints*.8}})):e.push({data:this.dataset,label:"price ("+r+")",fillArea:this.conf_highlow,color:I});this.show_emas&&(e.push({data:a.prices_ema12,label:"ema12",color:"#77a3ef",lines:{show:!0,lineWidth:1.3}}),e.push({data:a.prices_ema26,label:"ema26",color:"#ef9f5c",lines:{show:!0,lineWidth:1.3}}));this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(e,!1),this.chart_options.yaxis.min=
this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,e,this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.yaxis.tickFormatter=null,this.chart_options.legend.noColumns=this.exchanges.length,this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(this.dataset,!1),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]),$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){var a=[],e=B;this.chart_options.legend.noColumns=
2;this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2 "+r+"<br/> %x";a.push({data:e.prices,label:"merged price ("+r+")",color:I});a.push({data:e.prices_mavg,label:"moving average",color:oa,lines:{lineWidth:1.1}});this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(a,!1),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,a,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=""+('<span id="'+
this.cid+'_style"> | &nbsp;');a+='candles <a id="'+this.cid+'_candles" href="#"><img class="btn" id="btn_'+this.cid+'_candles" src="'+z+'"></a> lines <a id="'+this.cid+'_lines" href="#"><img class="btn" id="btn_'+this.cid+'_lines" src="'+v+'" /></a>';a+=' | &nbsp;show EMAs <a id="'+this.cid+'_emas" href="#"><img class="btn" id="btn_'+this.cid+'_emas" src="'+w+'" alt="off"/></a> ';a+="</span> | &nbsp;";a+='log <a id="'+this.cid+'_log" href="#"><img class="btn" id="btn_'+this.cid+'_log" src="'+w+'" alt="off"/></a> ';
$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_candles").on("click",function(a){a.preventDefault();e.setStyle("candles")});$("a#"+this.cid+"_lines").on("click",function(a){a.preventDefault();e.setStyle("lines")});$("a#"+this.cid+"_emas").on("click",function(a){a.preventDefault();e.toggleEMAs()});$("a#"+this.cid+"_log").on("click",function(a){a.preventDefault();e.toggleLog()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);"s"!=this.getMode()?$("span#"+
this.cid+"_style").hide():($("span#"+this.cid+"_style").show(),this.candles?($("img#btn_"+this.cid+"_candles").attr("src",z),$("img#btn_"+this.cid+"_lines").attr("src",v)):($("img#btn_"+this.cid+"_candles").attr("src",v),$("img#btn_"+this.cid+"_lines").attr("src",z)),this.show_emas?($("img#btn_"+this.cid+"_emas").attr("src",w),$("img#btn_"+this.cid+"_emas").attr("alt","off")):($("img#btn_"+this.cid+"_emas").attr("src",L),$("img#btn_"+this.cid+"_emas").attr("alt","on")));this.log?($("img#btn_"+this.cid+
"_log").attr("src",w),$("img#btn_"+this.cid+"_log").attr("alt","off")):($("img#btn_"+this.cid+"_log").attr("src",L),$("img#btn_"+this.cid+"_log").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_candles").off();$("a#"+this.cid+"_lines").off();$("a#"+this.cid+"_emas").off();$("a#"+this.cid+"_log").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"price"};a.getTitle=function(){return"Price"};return a}(),nb=function(){var a=function(a){this.constructor["super"].call(this,
a,"cv",!1);this.plots=[];this.exch_rel=Object.keys(exchanges_uid)[0];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},lines:{show:!0},grid:{hoverable:!0,borderWidth:"0"},points:{show:!1},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,color:"#151515",
position:K,tickFormatter:formatTickPercent}};this.selectRelExchange=function(a){this.exch_rel=a;for(a=0;a<this.exchanges.length;++a)$("a#relexch_"+this.cid+"_"+this.exchanges[a].name).off();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("exch_rel")&&a.exch_rel in exchanges_uid&&(this.exch_rel=a.exch_rel);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.exch_rel=this.exch_rel;return a};var h=this.prepare;this.prepare=function(a,
p,e){for(var l=0;l<this.exchanges.length;++l)$("a#relexch_"+this.cid+"_"+this.exchanges[l].name).off();h.call(this,a,p,e)};var g=this.update;this.update=function(a){this.plots=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();if("s"!=this.getMode()){for(var p=-1,e=0;e<this.exchanges.length;++e)if(this.exchanges[e].name==this.exch_rel){p=e;break}-1==p&&(p=0,this.exch_rel=this.exchanges[0].name);for(e=0;e<this.exchanges.length;++e){for(var l=this.exchanges[e],c=[],f=[],b=0,h=0;h<this.exchanges[p].prices_synced.length;++h){var k=
this.exchanges[p].prices_synced[h][1],n=l.prices_synced[h][1];0!=k&&0!=n&&(k=(n-k)/k*100,f.push(k),b+=k,3<f.length&&(b-=f.shift()),c.push([this.exchanges[p].prices_synced[h][0],b/f.length]))}f='<a id="relexch_'+this.cid+"_"+l.name+'" href="#" style="text-decoration:none;color:#949494;">'+l.name+"</a>";e==p&&(f='<a id="relexch_'+this.cid+"_"+l.name+'" href="#">'+l.name+"</a>");this.plots.push({data:c,label:f,color:W[l.id],tooltipFormat:l.name+" %y.2 %<br/> %x",lines:{lineWidth:1}})}}g.call(this,a)};
this.plot_single=function(){};this.plot_multiple=function(){this.chart_options.legend.noColumns=this.exchanges.length;$.plot(this.cdiv,this.plots,this.chart_options);var a=this;$.each(this.exchanges,function(p){$("a#relexch_"+a.cid+"_"+a.exchanges[p].name).on("click",function(e){e.preventDefault();a.selectRelExchange(a.exchanges[p].name)})})};var k=this.removeControls;this.removeControls=function(){for(var a=0;a<this.exchanges.length;++a)$("a#relexch_"+this.cid+"_"+this.exchanges[a].name).off();k.call(this)};
this.addControls()};A(a,C);a.getName=function(){return"pricerel"};a.getTitle=function(){return"Price (relative)"};return a}(),ob=function(){var a=function(a){this.constructor["super"].call(this,a,"cv",!1);this.data_multi=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},lines:{show:!1},points:{show:!0,fill:!1,lineWidth:1.7},grid:{hoverable:!0,borderWidth:"0"},
xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,yaxis:K,color:"#151515"}};var b=this.update;this.update=function(a){this.data_multi=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();if("s"!=this.getMode()){for(var c=[],g=this.exchanges.length,k=0;k<g;++k)this.exchanges[k].prices_mam_min=[],this.exchanges[k].prices_mam_max=[];for(k=0;k<this.exchanges[0].prices_synced.length;++k){for(var d=
null,p=null,e=0,l=7.777777777777777E22,D=this.exchanges[0].prices_synced[k][0],J=0,n=0,q=0;q<g;++q){var s=this.exchanges[q].prices_synced[k][1];0>=s||(J+=s,++n,s<l&&(d=this.exchanges[q],l=s),s>e&&(p=this.exchanges[q],e=s))}null!=d&&d.prices_mam_min.push([D,l]);null!=p&&p.prices_mam_max.push([D,e]);0<n&&0<J&&c.push([D,J/n])}for(k=0;k<g;++k)this.data_multi.push({data:this.exchanges[k].prices_mam_max,label:this.exchanges[k].name,color:P[this.exchanges[k].id][0],tooltipFormat:"Max: "+this.exchanges[k].name+
"<br/>%y.2 "+r+"<br/> %x"});this.data_multi.push({data:c,label:"average",color:"#fff",tooltipFormat:"Avg: %y.2 "+r+"<br/> %x",points:{show:!1},lines:{show:!0,lineWidth:.5}});for(k=0;k<g;++k)this.data_multi.push({data:this.exchanges[k].prices_mam_min,label:this.exchanges[k].name,color:P[this.exchanges[k].id][1],tooltipFormat:"Min: "+this.exchanges[k].name+"<br/>%y.2 "+r+"<br/> %x"})}b.call(this,a)};this.plot_single=function(){};this.plot_multiple=function(){this.chart_options.legend.noColumns=this.exchanges.length+
1;$.plot(this.cdiv,this.data_multi,this.chart_options)};this.addControls()};A(a,C);a.getName=function(){return"pricemam"};a.getTitle=function(){return"Price Min/Avg/Max"};return a}(),pb=function(){var a=function(a){this.constructor["super"].call(this,a,"s",!1);this.chart_options={};this.color_neg_delta="#d03010";this.color_pos_delta="#10d030";this.neg_delta=[];this.pos_delta=[];var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=
this.getTimeFormat();var c=this.exchanges[0];this.neg_delta=[];this.pos_delta=[];for(var g=0;g<c.macd_delta.length;++g)0>c.macd_delta[g][1]?this.neg_delta.push(c.macd_delta[g]):this.pos_delta.push(c.macd_delta[g]);b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=4;this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2<br/> %x";$.plot(this.cdiv,[{data:this.neg_delta,label:"-",color:this.color_neg_delta,lines:{show:!1},
bars:{show:!0,barWidth:this.nbmsecs/this.nbpoints*.3}},{data:this.pos_delta,label:"+",color:this.color_pos_delta,lines:{show:!1},bars:{show:!0,barWidth:this.nbmsecs/this.nbpoints*.3}},{data:a.macd,label:"macd",color:"#4234df",lines:{lineWidth:1.2}},{data:a.macd_ema9,label:"signal",color:"#f61000",lines:{lineWidth:1.2}}],this.chart_options)};this.plot_multiple=function(){};this.addControls()};A(a,C);a.getName=function(){return"macd"};a.getTitle=function(){return"MACD"};return a}(),qb=function(){var a=
function(a){this.constructor["super"].call(this,a,"s",!1);this.chart_options={};this.color_neg_delta="#d03010";this.color_pos_delta="#10d030";var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=3;this.chart_options.yaxis.tickFormatter=null;$.plot(this.cdiv,[{data:a.adx_dmn,label:"dm-",color:this.color_neg_delta,
lines:{lineWidth:1},tooltipFormat:"dm-<br/>%y.2<br/> %x"},{data:a.adx_dmp,label:"dm+",color:this.color_pos_delta,lines:{lineWidth:1},tooltipFormat:"dm+<br/>%y.2<br/> %x"},{data:a.adx,label:"adx",color:I,lines:{lineWidth:1.2},tooltipFormat:"adx<br/>%y.2<br/> %x"}],this.chart_options)};this.plot_multiple=function(){};this.addControls()};A(a,C);a.getName=function(){return"adx"};a.getTitle=function(){return"ADX"};return a}(),rb=function(){var a=function(a){this.constructor["super"].call(this,a,"s",!1);
this.chart_options={};this.stddev7=[];this.stddev21=[];this.relative=!0;this.toggleRelative=function(){this.relative=!this.relative;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("relative")&&(this.relative=a.relative);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.relative=this.relative;return a};var h=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=
this.getTimeFormat();this.stddev7=[];this.stddev21=[];if(this.relative){for(e in this.exchanges[0].variance7)this.stddev7.push([this.exchanges[0].variance7[e][0],100*Math.sqrt(this.exchanges[0].variance7[e][1])/this.exchanges[0].prices[e][1]]),this.stddev21.push([this.exchanges[0].variance21[e][0],100*Math.sqrt(this.exchanges[0].variance21[e][1])/this.exchanges[0].prices[e][1]]);this.chart_options.yaxis.tickFormatter=function(a){return a.toFixed(2)+"%"}}else for(var e in this.exchanges[0].variance7)this.stddev7.push([this.exchanges[0].variance7[e][0],
Math.sqrt(this.exchanges[0].variance7[e][1])]),this.stddev21.push([this.exchanges[0].variance21[e][0],Math.sqrt(this.exchanges[0].variance21[e][1])]);h.call(this,a)};this.plot_single=function(){var a=[];this.chart_options.legend.noColumns=3;this.chart_options.tooltipOpts.content=this.relative?"%y.2 %<br/> %x":"%y.2 "+r+"<br/> %x";a.push({data:this.stddev7,label:"stddev7",color:"#77a3ef",lines:{lineWidth:1}});a.push({data:this.stddev21,label:"stddev21",color:"#ef9f5c",lines:{lineWidth:1}});$.plot(this.cdiv,
a,this.chart_options)};this.plot_multiple=function(){};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=" | &nbsp; "+('relative <a id="'+this.cid+'_relative" href="#"><img class="btn" id="btn_'+this.cid+'_relative" src="'+w+'" alt="off"/></a> ');$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_relative").on("click",function(a){a.preventDefault();e.toggleRelative()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.relative?
($("img#btn_"+this.cid+"_relative").attr("src",w),$("img#btn_"+this.cid+"_relative").attr("alt","off")):($("img#btn_"+this.cid+"_relative").attr("src",L),$("img#btn_"+this.cid+"_relative").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_relative").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"stddev"};a.getTitle=function(){return"Volatility"};return a}(),sb=function(){var a=function(a){this.constructor["super"].call(this,a,
"sc",!0);this.chart_options={};this.dataset=[];this.relative=!1;this.toggleRelative=function(){this.relative=!this.relative;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("relative")&&(this.relative=a.relative);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.relative=this.relative;return a};var h=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=
this.getTimeFormat();this.chart_options.tooltipOpts.content=this.relative?"%y.2 %<br/> %x":"%y.2 "+r+"<br/> %x";this.chart_options.yaxis.tickFormatter=null;this.dataset=[];if(this.relative){if("s"==this.getMode())for(b in e=this.exchanges[0],e.atr)this.dataset.push([e.atr[b][0],100*e.atr[b][1]/e.prices[b][1]]);else if(this.merged)for(b in e=B,e.atr)this.dataset.push([e.atr[b][0],100*e.atr[b][1]/e.prices[b][1]]);else for(b=0;b<this.exchanges.length;++b){var e=this.exchanges[b],l=[],c;for(c in e.atr)l.push([e.atr[c][0],
100*e.atr[c][1]/e.prices[c][1]]);this.dataset.push({data:l,label:e.name,color:W[e.id],tooltipFormat:e.name+"<br />%y.2 %<br/> %x",lines:{lineWidth:1}})}this.chart_options.yaxis.tickFormatter=function(a){return a.toFixed(2)+"%"}}else if("c"==this.getMode())for(var b=0;b<this.exchanges.length;++b){var e=this.exchanges[b];this.dataset.push({data:e.atr,label:e.name,color:W[e.id],tooltipFormat:e.name+"<br />%y.2 "+r+"<br/> %x",lines:{lineWidth:1}})}h.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];
this.chart_options.legend.noColumns=1;this.relative?$.plot(this.cdiv,[{data:this.dataset,label:"atr",color:I,lines:{lineWidth:1.2}}],this.chart_options):$.plot(this.cdiv,[{data:a.atr,label:"atr",color:I,lines:{lineWidth:1.2}}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=this.exchanges.length,$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){this.chart_options.legend.noColumns=1;var a=B;this.relative?
$.plot(this.cdiv,[{data:this.dataset,label:"merged atr",color:I,lines:{lineWidth:1.2}}],this.chart_options):$.plot(this.cdiv,[{data:a.atr,label:"merged atr",color:I,lines:{lineWidth:1.2}}],this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=" | &nbsp;"+('relative <a id="'+this.cid+'_relative" href="#"><img class="btn" id="btn_'+this.cid+'_relative" src="'+w+'" alt="off"/></a> ');$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_relative").on("click",function(a){a.preventDefault();
e.toggleRelative()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.relative?($("img#btn_"+this.cid+"_relative").attr("src",w),$("img#btn_"+this.cid+"_relative").attr("alt","off")):($("img#btn_"+this.cid+"_relative").attr("src",L),$("img#btn_"+this.cid+"_relative").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_relative").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"atr"};
a.getTitle=function(){return"ATR"};return a}(),tb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.chart_options={};this.dataset=[];this.lower_bound=[];this.upper_bound=[];var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();this.chart_options.tooltipOpts.content="%y.2<br/> %x";this.chart_options.yaxis.tickFormatter=null;this.chart_options.yaxis.min=0;this.chart_options.yaxis.max=
100.1;this.dataset=[];this.lower_bound=[];this.upper_bound=[];this.lower_bound.push([this.exchanges[0].rsi[0][0],30]);this.lower_bound.push([this.exchanges[0].rsi[this.exchanges[0].rsi.length-1][0],30]);this.upper_bound.push([this.exchanges[0].rsi[0][0],70]);this.upper_bound.push([this.exchanges[0].rsi[this.exchanges[0].rsi.length-1][0],70]);if("c"==this.getMode()){for(var c=0;c<this.exchanges.length;++c){var g=this.exchanges[c];this.dataset.push({data:g.rsi_mavg,label:g.name,color:W[g.id],tooltipFormat:g.name+
"<br />%y.2<br/> %x",lines:{lineWidth:1}})}this.dataset.push({data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}});this.dataset.push({data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}})}b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=3;$.plot(this.cdiv,[{data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}},{data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}},{data:a.rsi,label:"rsi",
color:I,lines:{lineWidth:1.2}}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=this.exchanges.length+2,$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){this.chart_options.legend.noColumns=3;$.plot(this.cdiv,[{data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}},{data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}},{data:B.rsi,label:"average rsi",color:I,lines:{lineWidth:1.2}}],
this.chart_options)};this.addControls()};A(a,C);a.getName=function(){return"rsi"};a.getTitle=function(){return"RSI"};return a}(),ub=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.chart_options={};this.dataset=[];this.lower_bound=[];this.upper_bound=[];var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();this.chart_options.tooltipOpts.content="%y.2<br/> %x";this.chart_options.yaxis.tickFormatter=
null;this.dataset=[];this.lower_bound=[];this.upper_bound=[];this.lower_bound.push([this.exchanges[0].tsi[0][0],-25]);this.lower_bound.push([this.exchanges[0].tsi[this.exchanges[0].tsi.length-1][0],-25]);this.upper_bound.push([this.exchanges[0].tsi[0][0],25]);this.upper_bound.push([this.exchanges[0].tsi[this.exchanges[0].tsi.length-1][0],25]);if("c"==this.getMode()){for(var c=0;c<this.exchanges.length;++c){var g=this.exchanges[c];this.dataset.push({data:g.tsi,label:g.name,color:W[g.id],tooltipFormat:g.name+
"<br />%y.2<br/> %x",lines:{lineWidth:1}})}this.dataset.push({data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}});this.dataset.push({data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}})}b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=4;$.plot(this.cdiv,[{data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}},{data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}},{data:a.tsi,label:"tsi",
color:I,lines:{lineWidth:1.4}},{data:a.tsi_ema7,label:"ema7",color:"#77a3ef",lines:{lineWidth:1}}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=this.exchanges.length+2,$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){this.chart_options.legend.noColumns=4;$.plot(this.cdiv,[{data:this.lower_bound,label:"o.s.",color:"#720",lines:{lineWidth:1}},{data:this.upper_bound,label:"o.b.",color:"#072",lines:{lineWidth:1}},
{data:B.tsi,label:"average tsi",color:I,lines:{lineWidth:1.2}}],this.chart_options)};this.addControls()};A(a,C);a.getName=function(){return"tsi"};a.getTitle=function(){return"TSI"};return a}(),vb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.baratios={};this.baratios_mavg={};this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},
lines:{show:!0},grid:{hoverable:!0,borderWidth:"0"},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,color:"#151515",yaxis:K,tickFormatter:null}};this.normalized=!0;this.toggleNormalization=function(){this.normalized=!this.normalized;this.updateControls();this.update(!0);s()};this.denormalize=function(a){for(var e=this.baratios[a.name],c=this.baratios_mavg[a.name],b=0;b<e.length;++b)e[b][1]*=
a.prices[b][1],c[b][1]*=a.prices[b][1]};this.show_mavg=!0;this.toggleMAVG=function(){this.show_mavg=!this.show_mavg;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("norm")&&(this.normalized=a.norm);a.hasOwnProperty("mavg")&&(this.show_mavg=a.mavg);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.norm=this.normalized;a.mavg=this.show_mavg;return a};var h=this.update;this.update=function(a){this.dataset=[];
this.chart_options.xaxis.timeformat=this.getTimeFormat();this.baratios={};this.baratios_mavg={};if("s"!=this.getMode()&&this.merged)this.baratios[B.name]=jQuery.extend(!0,[],B.baratios),this.baratios_mavg[B.name]=jQuery.extend(!0,[],B.baratios_mavg);else for(var e=0;e<this.exchanges.length;++e){var c=this.exchanges[e];this.baratios[this.exchanges[e].name]=jQuery.extend(!0,[],c.baratios);this.baratios_mavg[this.exchanges[e].name]=jQuery.extend(!0,[],c.baratios_mavg)}if(!this.normalized)if("s"!=this.getMode()&&
this.merged)this.denormalize(B);else for(e=0;e<this.exchanges.length;++e)this.denormalize(this.exchanges[e]);if("c"==this.getMode()&&!this.merged){var b="<br />%y.2 "+r+"<br/> %x";this.normalized&&(b="<br />%y.3<br/> %x");for(e=0;e<this.exchanges.length;++e)c=this.exchanges[e],this.dataset.push({data:this.baratios_mavg[c.name],label:c.name,color:qa[c.id],tooltipFormat:c.name+b,lines:{lineWidth:1}})}h.call(this,a)};this.plot_single=function(){var a=this.exchanges[0],e=getExchangeCurrency(a.name),c=
[];this.chart_options.legend.noColumns=2;this.chart_options.tooltipOpts.content="%y.2 "+e+"<br/> %x";this.normalized&&(this.chart_options.tooltipOpts.content="%y.3<br/> %x");c.push({data:this.baratios[a.name],label:"total bids/asks ratio",color:ia});this.show_mavg&&c.push({data:this.baratios_mavg[a.name],label:"moving average",color:ja,lines:{lineWidth:1.1}});$.plot(this.cdiv,c,this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=this.exchanges.length,
$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){var a=B,e=[];this.chart_options.legend.noColumns=2;this.normalized&&(this.chart_options.tooltipOpts.content="%y.3<br/> %x");e.push({data:this.baratios[a.name],label:"ratio of merged bids & asks sums",color:ia});this.show_mavg&&e.push({data:this.baratios_mavg[a.name],label:"moving average",color:ja,lines:{lineWidth:1.1}});$.plot(this.cdiv,e,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);
var a;a=" | &nbsp;"+('normalize <a id="'+this.cid+'_norm" href="#"><img class="btn" id="btn_'+this.cid+'_norm" src="'+w+'" alt="off"/></a>');a+='<span id="'+this.cid+'_mavg"> | &nbsp;';a+='show mavg <a id="'+this.cid+'_mavg" href="#"><img class="btn" id="btn_'+this.cid+'_mavg" src="'+w+'" alt="off"/></a>';a+="</span>";$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_norm").on("click",function(a){a.preventDefault();e.toggleNormalization()});$("a#"+this.cid+"_mavg").on("click",function(a){a.preventDefault();
e.toggleMAVG()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.normalized?($("img#btn_"+this.cid+"_norm").attr("src",w),$("img#btn_"+this.cid+"_norm").attr("alt","off")):($("img#btn_"+this.cid+"_norm").attr("src",L),$("img#btn_"+this.cid+"_norm").attr("alt","on"));"c"!=this.getMode()||this.merged?($("span#"+this.cid+"_mavg").show(),this.show_mavg?($("img#btn_"+this.cid+"_mavg").attr("src",w),$("img#btn_"+this.cid+"_mavg").attr("alt","off")):($("img#btn_"+
this.cid+"_mavg").attr("src",L),$("img#btn_"+this.cid+"_mavg").attr("alt","on"))):$("span#"+this.cid+"_mavg").hide()};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_norm").off();$("a#"+this.cid+"_mavg").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"baratio"};a.getTitle=function(){return"Bids/Asks Ratio"};return a}(),wb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,
tooltipOpts:{content:"%y.2<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,noColumns:2,backgroundOpacity:.5,backgroundColor:"#000"},lines:{show:!0,lineWidth:1.1},grid:{hoverable:!0,borderWidth:"0"},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxes:[{font:{color:"#eee"},labelWidth:40,tickDecimals:1,alignTicksWithAxis:1,color:"#151515",tickFormatter:formatTickUSD},{font:{color:"#eee"},labelWidth:40,
tickDecimals:1,alignTicksWithAxis:1,position:K,color:"#151515",tickFormatter:formatTickBTC}]};var b=this.update;this.update=function(a){this.dataset=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();if("c"==this.getMode()){for(var c=0;c<this.exchanges.length;++c){var g=this.exchanges[c];this.dataset.push({data:g.sum_bids,label:g.name+" bids",color:P[g.id][0],yaxis:1,tooltipFormat:g.name+" bids<br />%y.0 "+r+" booked<br/>%x"})}for(c=0;c<this.exchanges.length;++c)g=this.exchanges[c],this.dataset.push({data:g.sum_asks,
label:g.name+" asks",color:P[g.id][1],yaxis:2,tooltipFormat:g.name+" asks<br />%y.0 BTC booked<br/>%x"})}b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0],c=getExchangeCurrency(a.name);this.chart_options.legend.noColumns=2;this.chart_options.tooltipOpts.content="%y.2 "+c+"<br/> %x";this.chart_options.yaxes[0].tickFormatter=currency_formatter[c];$.plot(this.cdiv,[{data:a.sum_bids,label:"bids sum ("+c+")",color:"#33cc03",yaxis:1,tooltipFormat:"%y.0 "+c+" booked<br/> %x "},{data:a.sum_asks,
label:"asks sum (BTC)",color:"#cc3300",yaxis:2,tooltipFormat:"%y.0 BTC booked<br/> %x "}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.yaxes[0].tickFormatter=currency_formatter[r],this.chart_options.legend.noColumns=Math.max(2,this.exchanges.length),$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){var a=B;this.chart_options.yaxes[0].tickFormatter=currency_formatter[r];$.plot(this.cdiv,[{data:a.sum_bids,label:"merged bids sum ("+
r+")",color:"#33cc03",yaxis:1,tooltipFormat:"%y.0 "+r+" booked<br/> %x "},{data:a.sum_asks,label:"merged asks sum (BTC)",color:"#cc3300",yaxis:2,tooltipFormat:"%y.0 BTC booked<br/> %x "}],this.chart_options)};this.addControls()};A(a,C);a.getName=function(){return"basums"};a.getTitle=function(){return"Bids/Asks Sums"};return a}(),xb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2 BTC<br/> %x",
xDateFormat:"%d-%b-%Y %H:%M:%S"},series:{stack:!0},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},grid:{hoverable:!0,borderWidth:"0"},bars:{show:!0,align:"left"},lines:{show:!0},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,min:0,tickDecimals:1,yaxis:K,tickFormatter:formatTickBTC,color:"#151515"}};this.bars=!0;this.setStyle=function(a){this.bars=
"bars"==a?!0:!1;this.updateControls();this.update(!0);s()};this.log=!1;this.toggleLog=function(){this.log=!this.log;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("bars")&&(this.bars=a.bars);a.hasOwnProperty("log")&&(this.log=a.log);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.bars=this.bars;a.log=this.log;return a};var h=this.update;this.update=function(a){this.dataset=[];this.chart_options.xaxis.timeformat=
this.getTimeFormat();this.bars&&(this.chart_options.bars.barWidth=this.nbmsecs/this.nbpoints*.3);this.chart_options.bars.show=this.bars;this.chart_options.lines.show=!this.bars;this.log?(this.chart_options.yaxis.transform=function(a){return 1>a?0:Math.log(a)/Math.LN10},this.chart_options.yaxis.inverseTransform=function(a){return 0==a?0:Math.exp(a*Math.LN10)}):(this.chart_options.yaxis.transform=null,this.chart_options.yaxis.inverseTransform=null,this.chart_options.yaxis.ticks=null,this.chart_options.yaxis.min=
0);var e=this.exchanges.length;this.chart_options.legend.noColumns=e;if("s"!=this.getMode())if(this.bars)if(this.merged)this.dataset.push({data:B.volume,label:"merged volume (BTC)",color:F,tooltipFormat:"%y.2 BTC<br/> %x"});else for(var c=0;c<e;++c){var b=this.exchanges[c];this.dataset.push({data:b.volume_synced,label:b.name,color:G[b.id],tooltipFormat:b.name+"<br />%y.2 BTC<br/> %x"})}else if(this.merged)this.dataset.push({data:B.volume,label:"merged volume (BTC)",color:F,id:"0",fillBelowTo:"zero",
tooltipFormat:"%y.2 BTC<br/> %x",lines:{lineWidth:1}});else for(b=this.exchanges[0],this.dataset.push({data:b.volume_synced,label:b.name,color:G[b.id],id:"0",fillBelowTo:"zero",tooltipFormat:b.name+"<br />%y.2 BTC<br/> %x",lines:{lineWidth:1}}),c=1;c<e;++c)b=this.exchanges[c],this.dataset.push({data:b.volume_synced,label:b.name,color:G[b.id],id:c.toString(),fillBelowTo:(c-1).toString(),tooltipFormat:b.name+"<br />%y.2 BTC<br/> %x",lines:{lineWidth:1}});h.call(this,a)};this.plot_single=function(){var a=
this.exchanges[0],e=[];this.bars?e.push({data:a.volume,label:"volume (BTC)",color:F}):e.push({data:a.volume,label:"volume (BTC)",color:F,id:"0",fillBelowTo:"zero"});this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(e,!1),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,e,this.chart_options)};this.plot_multiple=function(){this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(this.dataset,!0),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);
$.plot(this.cdiv,this.dataset,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=""+('<span id="'+this.cid+'_style"> | &nbsp;');a+='lines <a id="'+this.cid+'_lines" href="#"><img class="btn" id="btn_'+this.cid+'_lines" src="'+z+'"></a> bars <a id="'+this.cid+'_bars" href="#"><img class="btn" id="btn_'+this.cid+'_bars" src="'+v+'" /></a>';a+="</span> | &nbsp;";a+='log <a id="'+this.cid+'_log" href="#"><img class="btn" id="btn_'+this.cid+'_log" src="'+w+'" alt="off"/></a> ';
$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_lines").on("click",function(a){a.preventDefault();e.setStyle("lines")});$("a#"+this.cid+"_bars").on("click",function(a){a.preventDefault();e.setStyle("bars")});$("a#"+this.cid+"_log").on("click",function(a){a.preventDefault();e.toggleLog()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.bars?($("img#btn_"+this.cid+"_bars").attr("src",z),$("img#btn_"+this.cid+"_lines").attr("src",v)):($("img#btn_"+
this.cid+"_bars").attr("src",v),$("img#btn_"+this.cid+"_lines").attr("src",z));this.log?($("img#btn_"+this.cid+"_log").attr("src",w),$("img#btn_"+this.cid+"_log").attr("alt","off")):($("img#btn_"+this.cid+"_log").attr("src",L),$("img#btn_"+this.cid+"_log").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_bars").off();$("a#"+this.cid+"_lines").off();$("a#"+this.cid+"_log").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"volume"};
a.getTitle=function(){return"Volume (BTC)"};return a}(),yb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2 USD<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},series:{stack:!0},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},grid:{hoverable:!0,borderWidth:"0"},bars:{show:!0,align:"left"},lines:{show:!0},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},
color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,min:0,tickDecimals:1,yaxis:K,tickFormatter:formatTickBTC,color:"#151515"}};this.bars=!0;this.setStyle=function(a){this.bars="bars"==a?!0:!1;this.updateControls();this.update(!0);s()};this.log=!1;this.toggleLog=function(){this.log=!this.log;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("bars")&&(this.bars=a.bars);a.hasOwnProperty("log")&&(this.log=
a.log);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.bars=this.bars;a.log=this.log;return a};var h=this.update;this.update=function(a){this.dataset=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();this.bars&&(this.chart_options.bars.barWidth=this.nbmsecs/this.nbpoints*.3);this.chart_options.bars.show=this.bars;this.chart_options.lines.show=!this.bars;this.chart_options.tooltipOpts.content="%y.2 "+r+"<br/> %x";this.log?(this.chart_options.yaxis.transform=
function(a){return 1>a?0:Math.log(a)/Math.LN10},this.chart_options.yaxis.inverseTransform=function(a){return 0==a?0:Math.exp(a*Math.LN10)}):(this.chart_options.yaxis.transform=null,this.chart_options.yaxis.inverseTransform=null,this.chart_options.yaxis.ticks=null,this.chart_options.yaxis.min=0);var e=this.exchanges.length;this.chart_options.legend.noColumns=e;"s"==this.getMode()&&(b=this.exchanges[0],b.volume_synced=b.volume,b.prices_synced=b.prices);if(this.merged){for(var c=[],b=B,d=0;d<b.volume.length;++d)c.push([b.volume[d][0],
b.volume[d][1]*b.prices[d][1]]);b.volcurr=c}else for(var f=0;f<e;++f){b=this.exchanges[f];c=[];for(d=0;d<b.volume_synced.length;++d)c.push([b.volume_synced[d][0],b.volume_synced[d][1]*b.prices_synced[d][1]]);b.volcurr_synced=c}if("s"!=this.getMode())if(this.bars)if(this.merged)this.dataset.push({data:B.volcurr,label:"merged volume ("+r+")",color:F,tooltipFormat:"%y.2 "+r+"<br/> %x"});else for(f=0;f<e;++f)b=this.exchanges[f],this.dataset.push({data:b.volcurr_synced,label:b.name,color:G[b.id],tooltipFormat:b.name+
"<br />%y.2 "+r+"<br/> %x"});else if(this.merged)this.dataset.push({data:B.volcurr,label:"merged volume ("+r+")",color:F,id:"0",fillBelowTo:"zero",tooltipFormat:"%y.2 "+r+"<br/> %x",lines:{lineWidth:1}});else for(b=this.exchanges[0],this.dataset.push({data:b.volcurr_synced,label:b.name,color:G[b.id],id:"0",fillBelowTo:"zero",tooltipFormat:b.name+"<br />%y.2 "+r+"<br/> %x",lines:{lineWidth:1}}),f=1;f<e;++f)b=this.exchanges[f],this.dataset.push({data:b.volcurr_synced,label:b.name,color:G[b.id],id:f.toString(),
fillBelowTo:(f-1).toString(),tooltipFormat:b.name+"<br />%y.2 "+r+"<br/> %x",lines:{lineWidth:1}});h.call(this,a)};this.plot_single=function(){var a=this.exchanges[0],e=[];this.bars?e.push({data:a.volcurr_synced,label:"volume ("+r+")",color:F}):e.push({data:a.volcurr_synced,label:"volume ("+r+")",color:F,id:"0",fillBelowTo:"zero"});this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(e,!1),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,e,this.chart_options)};
this.plot_multiple=function(){this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(this.dataset,!0),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,this.dataset,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=""+('<span id="'+this.cid+'_style"> | &nbsp;');a+='lines <a id="'+this.cid+'_lines" href="#"><img class="btn" id="btn_'+this.cid+'_lines" src="'+z+'"></a> bars <a id="'+this.cid+'_bars" href="#"><img class="btn" id="btn_'+
this.cid+'_bars" src="'+v+'" /></a>';a+="</span> | &nbsp;";a+='log <a id="'+this.cid+'_log" href="#"><img class="btn" id="btn_'+this.cid+'_log" src="'+w+'" alt="off"/></a> ';$(this.tspan).append(a);var e=this;$("a#"+this.cid+"_lines").on("click",function(a){a.preventDefault();e.setStyle("lines")});$("a#"+this.cid+"_bars").on("click",function(a){a.preventDefault();e.setStyle("bars")});$("a#"+this.cid+"_log").on("click",function(a){a.preventDefault();e.toggleLog()});this.updateControls()};var k=this.updateControls;
this.updateControls=function(){k.call(this);this.bars?($("img#btn_"+this.cid+"_bars").attr("src",z),$("img#btn_"+this.cid+"_lines").attr("src",v)):($("img#btn_"+this.cid+"_bars").attr("src",v),$("img#btn_"+this.cid+"_lines").attr("src",z));this.log?($("img#btn_"+this.cid+"_log").attr("src",w),$("img#btn_"+this.cid+"_log").attr("alt","off")):($("img#btn_"+this.cid+"_log").attr("src",L),$("img#btn_"+this.cid+"_log").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+
this.cid+"_bars").off();$("a#"+this.cid+"_lines").off();$("a#"+this.cid+"_log").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"volcurr"};a.getTitle=function(){return"Volume (USD)"};return a}(),zb=function(){var a=function(a){this.constructor["super"].call(this,a,"cv",!1);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2 %<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},series:{stack:!0},legend:{position:"nw",margin:0,backgroundOpacity:.5,backgroundColor:"#000"},
grid:{hoverable:!0,borderWidth:"0"},bars:{show:!0,align:"left"},lines:{show:!0},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,min:0,max:100.1,tickDecimals:1,yaxis:K,tickFormatter:formatTickUnsignedPercent,color:"#151515"}};this.bars=!1;this.setStyle=function(a){this.bars="bars"==a?!0:!1;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("bars")&&
(this.bars=a.bars);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.bars=this.bars;return a};var h=this.update;this.update=function(a){this.dataset=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();var e=this.exchanges.length;this.chart_options.legend.noColumns=e;this.bars&&(this.chart_options.bars.barWidth=this.nbmsecs/this.nbpoints*.25);this.chart_options.bars.show=this.bars;this.chart_options.lines.show=!this.bars;if("s"!=this.getMode())if(this.bars)for(var c=
0;c<e;++c){var b=this.exchanges[c];this.dataset.push({data:b.volumerel,label:b.name,color:G[b.id],tooltipFormat:b.name+"<br />%y.2 %<br/> %x"})}else for(b=this.exchanges[0],this.dataset.push({data:b.volumerel,label:b.name,color:G[b.id],id:"0",fillBelowTo:"zero",tooltipFormat:b.name+" %y.2 %<br/> %x",lines:{lineWidth:1}}),c=1;c<e;++c)b=this.exchanges[c],this.dataset.push({data:b.volumerel,label:b.name,color:G[b.id],id:c.toString(),fillBelowTo:(c-1).toString(),tooltipFormat:b.name+" %y.2 %<br/> %x",
lines:{lineWidth:1}});h.call(this,a)};this.plot_multiple=function(){$.plot(this.cdiv,this.dataset,this.chart_options)};this.plot_single=function(){};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=""+('<span id="'+this.cid+'_style"> | &nbsp;');a+='lines <a id="'+this.cid+'_lines" href="#"><img class="btn" id="btn_'+this.cid+'_lines" src="'+z+'"></a> bars <a id="'+this.cid+'_bars" href="#"><img class="btn" id="btn_'+this.cid+'_bars" src="'+v+'" /></a>';a+="</span>";$(this.tspan).append(a);
var e=this;$("a#"+this.cid+"_lines").on("click",function(a){a.preventDefault();e.setStyle("lines")});$("a#"+this.cid+"_bars").on("click",function(a){a.preventDefault();e.setStyle("bars")});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.bars?($("img#btn_"+this.cid+"_bars").attr("src",z),$("img#btn_"+this.cid+"_lines").attr("src",v)):($("img#btn_"+this.cid+"_bars").attr("src",v),$("img#btn_"+this.cid+"_lines").attr("src",z))};var d=this.removeControls;
this.removeControls=function(){$("a#"+this.cid+"_bars").off();$("a#"+this.cid+"_lines").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"volumerel"};a.getTitle=function(){return"Volume (relative)"};return a}(),Ab=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2 trades<br/> %x",xDateFormat:"%d-%b-%Y %H:%M:%S"},series:{stack:!0},legend:{position:"nw",margin:0,backgroundOpacity:.5,
backgroundColor:"#000"},grid:{hoverable:!0,borderWidth:"0"},bars:{show:!0,align:"left"},lines:{show:!0},xaxis:{mode:"time",timezone:"browser",timeformat:"%H:%M:%S",font:{color:"#eee"},color:"#151515",autoscaleMargin:.005,ticks:null},yaxis:{font:{color:"#eee"},labelWidth:40,min:0,tickFormatter:formatTickUnit,yaxis:K,color:"#151515"}};this.bars=!1;this.setStyle=function(a){this.bars="bars"==a?!0:!1;this.updateControls();this.update(!0);s()};this.log=!1;this.toggleLog=function(){this.log=!this.log;this.updateControls();
this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("bars")&&(this.bars=a.bars);a.hasOwnProperty("log")&&(this.log=a.log);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.bars=this.bars;a.log=this.log;return a};var h=this.update;this.update=function(a){this.dataset=[];this.chart_options.xaxis.timeformat=this.getTimeFormat();this.bars&&(this.chart_options.bars.barWidth=this.nbmsecs/this.nbpoints*.3);this.chart_options.bars.show=this.bars;
this.chart_options.lines.show=!this.bars;this.log?(this.chart_options.yaxis.transform=function(a){return 1>a?0:Math.log(a)/Math.LN10},this.chart_options.yaxis.inverseTransform=function(a){return 0==a?0:Math.exp(a*Math.LN10)}):(this.chart_options.yaxis.transform=null,this.chart_options.yaxis.inverseTransform=null,this.chart_options.yaxis.ticks=null,this.chart_options.yaxis.min=0);var e=this.exchanges.length;this.chart_options.legend.noColumns=e;if("s"!=this.getMode())if(this.bars)if(this.merged)this.dataset.push({data:B.nb_trades,
label:"merged nb. trades",color:F,tooltipFormat:"%y trades<br/> %x"});else for(var c=0;c<e;++c){var b=this.exchanges[c];this.dataset.push({data:b.nb_trades_synced,label:b.name,color:G[b.id],tooltipFormat:b.name+"<br />%y trades<br/> %x"})}else if(this.merged)this.dataset.push({data:B.nb_trades,label:"merged nb. trades",color:F,id:"0",fillBelowTo:"zero",tooltipFormat:"%y trades<br/> %x",lines:{lineWidth:1}});else for(b=this.exchanges[0],this.dataset.push({data:b.nb_trades_synced,label:b.name,color:G[b.id],
id:"0",fillBelowTo:"zero",tooltipFormat:b.name+"<br />%y trades<br/> %x",lines:{lineWidth:1}}),c=1;c<e;++c)b=this.exchanges[c],this.dataset.push({data:b.nb_trades_synced,label:b.name,color:G[b.id],id:c.toString(),fillBelowTo:(c-1).toString(),tooltipFormat:b.name+"<br />%y trades<br/> %x",lines:{lineWidth:1}});h.call(this,a)};this.plot_single=function(){var a=this.exchanges[0],b=[];this.bars?b.push({data:a.nb_trades,label:"nb. trades",color:F}):b.push({data:a.nb_trades,label:"nb. trades",color:F,id:"0",
fillBelowTo:"zero"});this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(b,!1),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,b,this.chart_options)};this.plot_multiple=function(){this.log&&(this.chart_options.yaxis.ticks=this.computeLogTicks(this.dataset,!0),this.chart_options.yaxis.min=this.chart_options.yaxis.ticks[0]);$.plot(this.cdiv,this.dataset,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=""+('<span id="'+
this.cid+'_style"> | &nbsp;');a+='lines <a id="'+this.cid+'_lines" href="#"><img class="btn" id="btn_'+this.cid+'_lines" src="'+z+'"></a> bars <a id="'+this.cid+'_bars" href="#"><img class="btn" id="btn_'+this.cid+'_bars" src="'+v+'" /></a>';a+="</span> | &nbsp;";a+='log <a id="'+this.cid+'_log" href="#"><img class="btn" id="btn_'+this.cid+'_log" src="'+w+'" alt="off"/></a> ';$(this.tspan).append(a);var b=this;$("a#"+this.cid+"_lines").on("click",function(a){a.preventDefault();b.setStyle("lines")});
$("a#"+this.cid+"_bars").on("click",function(a){a.preventDefault();b.setStyle("bars")});$("a#"+this.cid+"_log").on("click",function(a){a.preventDefault();b.toggleLog()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.bars?($("img#btn_"+this.cid+"_bars").attr("src",z),$("img#btn_"+this.cid+"_lines").attr("src",v)):($("img#btn_"+this.cid+"_bars").attr("src",v),$("img#btn_"+this.cid+"_lines").attr("src",z));this.log?($("img#btn_"+this.cid+"_log").attr("src",
w),$("img#btn_"+this.cid+"_log").attr("alt","off")):($("img#btn_"+this.cid+"_log").attr("src",L),$("img#btn_"+this.cid+"_log").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_bars").off();$("a#"+this.cid+"_lines").off();$("a#"+this.cid+"_log").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"nbtrades"};a.getTitle=function(){return"Nb. of Trades"};return a}(),Bb=function(){var a=function(a){this.constructor["super"].call(this,
a,"sc",!0);this.chart_options={};this.dataset=[];var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2 BTC<br/> %x";this.dataset=[];if("c"==this.getMode())for(var c=0;c<this.exchanges.length;++c){var g=this.exchanges[c];this.dataset.push({data:g.avg_trade_size,label:g.name,color:G[g.id],tooltipFormat:g.name+"<br />%y.2 BTC<br/> %x",
lines:{lineWidth:1}})}b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=2;$.plot(this.cdiv,[{data:a.avg_trade_size,label:"average trade size",color:F,lines:{lineWidth:1.2}}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=this.exchanges.length,$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){this.chart_options.legend.noColumns=1;$.plot(this.cdiv,
[{data:B.avg_trade_size,label:"average trade size",color:F,lines:{lineWidth:1.2}}],this.chart_options)};this.addControls()};A(a,C);a.getName=function(){return"avgtrade"};a.getTitle=function(){return"Average Trade Size"};return a}(),Cb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.dataset=[];this.chart_options={canvas:!0,tooltip:!0,tooltipOpts:{content:"%y.2 BTC booked at %x USD",xDateFormat:"%d-%b-%Y %H:%M:%S"},legend:{position:"nw",margin:0,noColumns:5,backgroundOpacity:.5,
backgroundColor:"#000"},grid:{hoverable:!0,borderWidth:"0"},bars:{show:!0,align:"center",barWidth:.5},lines:{show:!1},xaxis:{font:{color:"#eee"},color:"#151515"},yaxes:[{font:{color:"#eee"},labelWidth:40,tickDecimals:1,alignTicksWithAxis:1,color:"#151515",position:"left",tickFormatter:formatTickUnit},{font:{color:"#eee"},labelWidth:40,tickDecimals:1,alignTicksWithAxis:1,position:"right",color:"#151515"}]};this.zoom_factor=1.1;this.zoom_icon_in="/coinorama/static/btn-zoom.png";this.zoom_icon_out="/coinorama/static/btn-unzoom.png";
this.zoom_icon_reset="/coinorama/static/btn-zoom-reset.png";this.zoomBook=function(a){this.zoom_factor*=a;this.update(!0);s()};this.zoomBookReset=function(){this.zoom_factor=1.1;this.update(!0);s()};this.accumulated=!0;this.accum_icon_off="/coinorama/static/btn-book-bars.png";this.accum_icon_on="/coinorama/static/btn-book-cumul.png";this.toggleAccumulation=function(){this.accumulated=!this.accumulated;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("zoom")&&
(this.zoom_factor=a.zoom,this.zoom_factor==Number.NaN||0>this.zoom_factor)&&(this.zoom_factor=1.1);a.hasOwnProperty("accum")&&(this.accumulated=a.accum);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.zoom=this.zoom_factor;a.accum=this.accumulated;return a};var h=this.update;this.update=function(a){this.dataset=[];if(0!=this.exchanges.length){for(var b=0,c=0;c<this.exchanges.length;++c)var d=this.exchanges[c],b=b+d.prices[d.prices.length-1][1];b/=this.exchanges.length;
c=Math.min(b-2,Math.max(20,b/this.zoom_factor));this.chart_options.xaxis.min=c;this.chart_options.xaxis.max=b+(b-c);if("s"==this.getMode()){d=this.exchanges[0];b=6E4;d.book_prices_time=(d.prices[d.prices.length-1][0]-d.prices[0][0])/b;100<=d.book_prices_time&&(b=1500>d.book_prices_time?36E5:864E5);d.book_accum_prices=[];for(c=0;c<d.prices.length;++c)d.book_accum_prices[c]=[d.prices[c][1],(d.prices[d.prices.length-1][0]-d.prices[c][0])/b];this.chart_options.yaxes[0].position="left"}else this.chart_options.yaxes[0].position=
K;for(c=b=0;c<this.exchanges.length;++c){d=this.exchanges[c];d.book_bids_accum=[];d.book_asks_accum=[];for(var f=0,g=0,k=0;k<d.book_bids.length;++k){f+=d.book_bids[k][1];if(d.book_bids[k][0]>this.chart_options.xaxis.min)b=Math.max(b,d.book_bids[k][1]);else{g=Math.max(g,f);break}d.book_bids_accum.push([d.book_bids[k][0],f])}for(k=f=0;k<d.book_asks.length;++k){f+=d.book_asks[k][1];if(d.book_asks[k][0]<this.chart_options.xaxis.max)b=Math.max(b,d.book_asks[k][1]);else{g=Math.max(g,f);break}d.book_asks_accum.push([d.book_asks[k][0],
f])}if("s"!=this.getMode()||this.accumulated)b=Math.max(b,g);"s"!=this.getMode()&&this.dataset.push({data:d.book_bids_accum,label:d.name+" bids",color:P[d.id][0],yaxis:1,tooltipFormat:d.name+" bids<br />%y.2 BTC<br />booked above %x.1 "+r,lines:{lineWidth:1}})}this.chart_options.yaxes[0].max=1.04*b;for(c=0;c<this.exchanges.length;++c)d=this.exchanges[c],"s"!=this.getMode()&&this.dataset.push({data:d.book_asks_accum,label:d.name+" asks",color:P[d.id][1],yaxis:1,tooltipFormat:d.name+" asks<br />%y.2 BTC<br />booked below %x.1 "+
r,lines:{lineWidth:1}});if(this.merged&&"s"!=this.getMode()){d=this.exchanges[0].book_asks_accum.slice();b=this.exchanges[0].book_bids_accum.slice();this.dataset=[];f=function(a,b,c,e){for(var d=0,f=0,l=0,g=0,h=[];d<a.length&&f<b.length;){if(c){if(b[f][0]<e){f=b.length;break}}else if(b[f][0]>e){f=b.length;break}if(a[d][0]==b[f][0])g+=b[f][1],l=a[d][1]+g,h.push([a[d][0],l]),++d,++f;else{var k=a[d][0]<b[f][0];c&&(k=!k);k?(l=a[d][1]+g,h.push([a[d][0],l]),++d):(g+=b[f][1],l+=b[f][1],h.push([b[f][0],l]),
++f)}}for(;d<a.length;)h.push([a[d][0],a[d][1]+g]),++d;for(;f<b.length;){if(c){if(b[f][0]<e)break}else if(b[f][0]>e)break;l+=b[f][1];h.push([b[f][0],l]);++f}return h};exch_names=this.exchanges[0].name;for(c=1;c<this.exchanges.length;++c)exch_names=exch_names+", "+this.exchanges[c].name,d=f(d,this.exchanges[c].book_asks,!1,this.chart_options.xaxis.max),b=f(b,this.exchanges[c].book_bids,!0,this.chart_options.xaxis.min);c=Math.max(d[d.length-1][1],b[b.length-1][1]);this.chart_options.yaxes[0].max=1.04*
c;this.dataset.push({data:b,label:"bids of "+exch_names,color:"#33cc03",yaxis:1,tooltipFormat:"cumulated bids<br />%y.2 BTC<br />booked above %x.1 "+r,lines:{lineWidth:1}});this.dataset.push({data:d,label:"asks of "+exch_names,color:"#cc3300",yaxis:1,tooltipFormat:"cumulated asks<br />%y.2 BTC<br />booked below %x.1 "+r,lines:{lineWidth:1}})}h.call(this,a)}};this.plot_single=function(){var a=this.exchanges[0],b=getExchangeCurrency(a.name);this.accumulated?(this.chart_options.bars.show=!1,this.chart_options.lines.show=
!0,this.chart_options.legend.noColumns=3,book_accum_tooltip=100>a.book_prices_time?"%y.2 minutes ago<br />%x.2 "+b+"/BTC":1500>a.book_prices_time?"%y.2 hours ago<br />%x.2 "+b+"/BTC":"%y.2 days ago<br />%x.2 "+b+"/BTC",this.chart_options.yaxes[1].max=1.02*a.book_accum_prices[0][1],$.plot(this.cdiv,[{data:a.book_bids_accum,label:"bids",color:"#33cc03",yaxis:1,tooltipFormat:"%y.2 BTC<br />booked above %x "+b},{data:a.book_asks_accum,label:"asks",color:"#cc3300",yaxis:1,tooltipFormat:"%y.2 BTC<br />booked below %x "+
b},{data:a.book_accum_prices,label:"price ("+b+")",color:I,yaxis:2,tooltipFormat:book_accum_tooltip,lines:{lineWidth:1}}],this.chart_options)):(this.chart_options.bars.show=!0,this.chart_options.lines.show=!1,this.chart_options.legend.noColumns=2,$.plot(this.cdiv,[{data:a.book_bids,label:"bids",color:"#33cc03",yaxis:1,tooltipFormat:"%y.2 BTC at %x "+b+" for buying"},{data:a.book_asks,label:"asks",color:"#cc3300",yaxis:1,tooltipFormat:"%y.2 BTC at %x "+b+" for selling"}],this.chart_options))};this.plot_multiple=
function(){this.chart_options.bars.show=!1;this.chart_options.lines.show=!0;this.chart_options.legend.noColumns=Math.max(2,this.exchanges.length);this.merged&&(this.chart_options.legend.noColumns=1);$.plot(this.cdiv,this.dataset,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=" | &nbsp;"+('<a id="'+this.cid+'_accum" href="#"><img class="btn" id="btn_'+this.cid+'_accum" src="'+this.accum_icon_off+'" alt="cumulative view"/></a>');a+='<a id="'+this.cid+'_zoom" href="#"><img class="btn" src="'+
this.zoom_icon_in+'" alt="zoom in"/></a> ';a+='<a id="'+this.cid+'_zoom_reset" href="#"><img class="btn" src="'+this.zoom_icon_reset+'" alt="zoom reset"/></a> ';a+='<a id="'+this.cid+'_unzoom" href="#"><img class="btn" src="'+this.zoom_icon_out+'" alt="zoom out"/></a>';$(this.tspan).append(a);var b=this;$("a#"+this.cid+"_accum").on("click",function(a){a.preventDefault();b.toggleAccumulation()});$("a#"+this.cid+"_unzoom").on("click",function(a){a.preventDefault();b.zoomBook(1.01)});$("a#"+this.cid+
"_zoom").on("click",function(a){a.preventDefault();b.zoomBook(.99)});$("a#"+this.cid+"_zoom_reset").on("click",function(a){a.preventDefault();b.zoomBookReset()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);"s"!=this.getMode()?$("a#"+this.cid+"_accum").hide():($("a#"+this.cid+"_accum").show(),this.accumulated?($("img#btn_"+this.cid+"_accum").attr("src",this.accum_icon_off),$("img#btn_"+this.cid+"_accum").attr("alt","bars view")):($("img#btn_"+this.cid+
"_accum").attr("src",this.accum_icon_on),$("img#btn_"+this.cid+"_accum").attr("alt","cumulative view")))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_accum").off();$("a#"+this.cid+"_unzoom").off();$("a#"+this.cid+"_zoom").off();$("a#"+this.cid+"_zoom_reset").off();d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"book"};a.getTitle=function(){return"Order Book"};return a}(),Db=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",
!1);this.dataset=[];this.chart_options={};this.subtract=!1;this.toggleSubtract=function(){this.subtract=!this.subtract;this.updateControls();this.update(!0);s()};var b=this.setConfig;this.setConfig=function(a){a.hasOwnProperty("subtract")&&(this.subtract=a.subtract);b.call(this,a)};var f=this.getConfig;this.getConfig=function(){var a=f.call(this);a.subtract=this.subtract;return a};var h=this.update;this.update=function(a){this.dataset=[];if(0!=this.exchanges.length){this.chart_options=jQuery.extend(!0,
{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();if(this.subtract)if("s"!=this.getMode())for(var b=0;b<this.exchanges.length;++b){var c=this.exchanges[b],d=[],f;for(f in c.top_bid)d.push([c.top_bid[f][0],c.top_ask[f][1]-c.top_bid[f][1]]);this.dataset.push({data:d,label:c.name,color:P[c.id][1],tooltipFormat:c.name+"<br />ask - bid = %y.3 "+r+"<br/> %x",lines:{lineWidth:1}})}else for(f in c=this.exchanges[0],c.top_bid)this.dataset.push([c.top_bid[f][0],c.top_ask[f][1]-c.top_bid[f][1]]);
else if("s"!=this.getMode()){for(b=0;b<this.exchanges.length;++b)c=this.exchanges[b],this.dataset.push({data:c.top_bid,label:c.name+" bid",color:P[c.id][0],tooltipFormat:c.name+" bid<br />%y.3 "+r+"<br/> %x",lines:{lineWidth:1}});for(b=0;b<this.exchanges.length;++b)c=this.exchanges[b],"s"!=this.getMode()&&this.dataset.push({data:c.top_ask,label:c.name+" ask",color:P[c.id][1],tooltipFormat:c.name+" ask<br />%y.3 "+r+"<br/> %x",lines:{lineWidth:1}})}h.call(this,a)}};this.plot_single=function(){var a=
this.exchanges[0],b=getExchangeCurrency(a.name);this.subtract?(this.chart_options.legend.noColumns=1,this.chart_options.tooltipOpts.content="ask - bid = %y.3 "+b+"<br/> %x",this.chart_options.yaxis.min=0,$.plot(this.cdiv,[{data:this.dataset,label:"ask - bid",color:"#cc3300"}],this.chart_options)):(this.chart_options.legend.noColumns=2,this.chart_options.tooltipOpts.content="%y.3 "+b+"<br/> %x",$.plot(this.cdiv,[{data:a.top_ask,label:"ask",color:"#33cc03",lines:{lineWidth:1}},{data:a.top_bid,label:"bid",
color:"#cc3300",lines:{lineWidth:1}}],this.chart_options))};this.plot_multiple=function(){this.chart_options.yaxis.tickFormatter=null;this.chart_options.legend.noColumns=Math.max(2,this.exchanges.length);this.subtract&&(this.chart_options.yaxis.min=0);$.plot(this.cdiv,this.dataset,this.chart_options)};var g=this.addControls;this.addControls=function(){g.call(this);var a;a=" | &nbsp;"+('subtract <a id="'+this.cid+'_sub" href="#"><img class="btn" id="btn_'+this.cid+'_sub" src="'+w+'" alt="off"/></a> ');
$(this.tspan).append(a);var b=this;$("a#"+this.cid+"_sub").on("click",function(a){a.preventDefault();b.toggleSubtract()});this.updateControls()};var k=this.updateControls;this.updateControls=function(){k.call(this);this.subtract?($("img#btn_"+this.cid+"_sub").attr("src",w),$("img#btn_"+this.cid+"_sub").attr("alt","off")):($("img#btn_"+this.cid+"_sub").attr("src",L),$("img#btn_"+this.cid+"_sub").attr("alt","on"))};var d=this.removeControls;this.removeControls=function(){$("a#"+this.cid+"_sub").off();
d.call(this)};this.addControls()};A(a,C);a.getName=function(){return"spread"};a.getTitle=function(){return"Spread"};return a}(),Eb=function(){var a=function(a){this.constructor["super"].call(this,a,"sc",!0);this.chart_options={};this.dataset=[];var b=this.update;this.update=function(a){this.chart_options=jQuery.extend(!0,{},S);this.chart_options.xaxis.timeformat=this.getTimeFormat();this.dataset=[];if("c"==this.getMode())for(var c=0;c<this.exchanges.length;++c){var g=this.exchanges[c];this.dataset.push({data:g.lag,
label:g.name,color:pa[g.id],tooltipFormat:g.name+"<br />%y.2 seconds<br/> %x",lines:{lineWidth:1}})}b.call(this,a)};this.plot_single=function(){var a=this.exchanges[0];this.chart_options.legend.noColumns=2;this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2 seconds<br/> %x";$.plot(this.cdiv,[{data:a.lag,label:"lag (s)",color:ka,lines:{lineWidth:1.2}}],this.chart_options)};this.plot_multiple=function(){this.merged?this.plot_merged():(this.chart_options.legend.noColumns=
this.exchanges.length,this.chart_options.yaxis.tickFormatter=null,this.chart_options.tooltipOpts.content="%y.2 seconds<br/> %x",$.plot(this.cdiv,this.dataset,this.chart_options))};this.plot_merged=function(){this.chart_options.legend.noColumns=1;var a=B;this.chart_options.yaxis.tickFormatter=null;this.chart_options.tooltipOpts.content="%y.2 seconds<br/> %x";$.plot(this.cdiv,[{data:a.lag,label:"merged lag (s)",color:ka,lines:{lineWidth:1.2}}],this.chart_options)};this.addControls()};A(a,C);a.getName=
function(){return"lag"};a.getTitle=function(){return"Lag (seconds)"};return a}();if("M"==coinorama_getCurrentSection()){for(var u in exchanges_uid)ma[u]=null;var Ta=[{name:"Price",charts:[mb,nb,ob]},{name:"Indicators",charts:[pb,qb,tb,ub,rb,sb]},{name:"Volume",charts:[xb,yb,zb,Ab,Bb]},{name:"Order Book",charts:[vb,wb,Cb,Db]},{name:"Others",charts:[Eb]}];aa("ml1");aa("ml2");aa("ml3");aa("mr1");aa("mr2");aa("mr3");kb();$.each(T,function(a){$("a#view_"+a).on("click",function(c){c.preventDefault();-1!=
x&&clearTimeout(x);$("a#view_"+n.view).css("color",M);$("a#view_"+a).css("color",R);n.view=a;for(cid in q)q[cid].viewlengthChanged();X=!0;O();s()});$("a#view_"+a).css("color",M);$("a#view_"+a).css("text-decoration","none")});$("a#view_mode_length").on("click",function(a){a.preventDefault();ra("length")});$("a#view_mode_length").css("color",M);$("a#view_mode_length").css("text-decoration","none");$("a#view_mode_interval").on("click",function(a){a.preventDefault();ra("interval")});$("a#view_mode_interval").css("color",
M);$("a#view_mode_interval").css("text-decoration","none");lb();$("a#mode_single").on("click",function(a){a.preventDefault();na("s")});$("a#mode_single").css("text-decoration","none");$("a#mode_multi").on("click",function(a){a.preventDefault();na("c")});$("a#mode_multi").css("text-decoration","none");$.each(currency_symbol,function(a){$("a#cur_"+a).on("click",function(c){c.preventDefault();-1!=x&&clearTimeout(x);if("s"==n.mode)for(var b in exchanges_uid){if(getExchangeCurrency(b)==a){Ba(b);break}}else{H=
0;n.exch_multi=0;for(b in exchanges_uid)E[b]=!1,$("a#exch_"+b).css("color",M);for(b in exchanges_uid)if(getExchangeCurrency(b)==a&&(E[b]=!0,n.exch_multi+=exchanges_uid[b],$("a#exch_"+b).css("color",R),++H),4<H)break}n.curr[a]||Aa(a);r=a;$("option#chart_type_price").text("Price ("+r+")");$("option#chart_type_volcurr").text("Volume ("+r+")");previous_price=0;Y=X=!0;O();s()});$("a#cur_"+a+"_display").on("click",function(c){c.preventDefault();Aa(a)});$("a#cur_"+a).css("color","#bbb");$("a#cur_"+a).css("text-decoration",
"none");n.curr[a]=!1});$.each(exchanges_uid,function(a){$("a#exch_"+a).on("click",function(c){c.preventDefault();Ba(a)});$("a#exch_"+a).css("text-decoration","none");E[a]=!1});$("a#toggle_right_pane").on("click",function(a){a.preventDefault();-1!=x&&clearTimeout(x);n.rpanel=!n.rpanel;Na();for(var c in q)("l"==c[1]||n.rpanel)&&q[c].update(!0);s();x=setTimeout(O,2E3)});$("a#toggle_theme_classic").on("click",function(a){a.preventDefault();Ka("classic")});$("a#toggle_theme_perchart").on("click",function(a){a.preventDefault();
Ka("thematic")});$("a#toggle_yaxis_left").on("click",function(a){a.preventDefault();Ma("left")});$("a#toggle_yaxis_right").on("click",function(a){a.preventDefault();Ma("right")});Ua();La();var Fb=Long.fromNumber(n.exch_multi);for(u in exchanges_uid){var Gb=Long.fromNumber(exchanges_uid[u]);Fb.and(Gb).isZero()||(E[u]=!0,++H);if(4<H)break}for(y in currency_list)1<exchanges_by_currency[currency_list[y]].length&&za(currency_list[y]);$.each(q,function(a){q[a]=new fa[n[a].name](a);q[a].setConfig(n[a]);
$("select#cb_"+a+' option[value="'+n[a].name+'"]').prop("selected",!0);$("a#toggle_"+a).on("click",function(c){c.preventDefault();q[a].toggleVisibility();s()});q[a].expanded&&Ra(a)});$("a#view_"+n.view).css("color",R);ra(n.viewmode);$("option#chart_type_price").text("Price ("+r+")");Na();$(window).resize(function(){Z(1)});Z(0);Ca();na(n.mode)}}$(function(){function ba(){0==exchanges_info.length?timeout_markets_config_id=setTimeout(ba,200):coinorama_markets_load()}ba()});
